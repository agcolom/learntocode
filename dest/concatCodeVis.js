function wraptorect(e,t,n,i){var r=parseInt(t.getAttribute("x")),o=parseInt(t.getAttribute("y")),a=parseInt(t.getAttribute("width")),d=parseInt(window.getComputedStyle(e)["font-size"]),s=d+i,l=e.cloneNode(!1);l.setAttributeNS(null,"x",r+n),l.setAttributeNS(null,"y",o+n);var c=l.cloneNode(!1);c.setAttributeNS(null,"visibility","hidden");var h=document.createElementNS(null,"tspan"),u=document.createTextNode(e.textContent);h.appendChild(u),c.appendChild(h);for(var m,w=(document.getElementsByTagName("svg")[0].appendChild(c),e.textContent.split(" ")),p=line2="",g=0,f=0;f<w.length;f++)line2=p+w[f]+" ",c.textContent=line2,m=c.getBBox().width,m+2*n>a?(h=document.createElementNS("http://www.w3.org/2000/svg","tspan"),h.setAttributeNS(null,"x",r+n),h.setAttributeNS(null,"dy",s),u=document.createTextNode(p),h.appendChild(u),l.appendChild(h),p=w[f]+" ",g++):p=line2;var h=document.createElementNS("http://www.w3.org/2000/svg","tspan");h.setAttributeNS(null,"x",r+n),h.setAttributeNS(null,"dy",s);var u=document.createTextNode(p);return h.appendChild(u),l.appendChild(h),c.parentNode.removeChild(c),e.parentNode.replaceChild(l,e),g}function drawArray(e,t,n,i){innerGroup=!1;var r=new Array;new Array;if(!Array.isArray(e))throw new Error(t+" is not an array.");if(e.indexOf('"')!=-1)throw new Error(t+" is not an array.");startY+=100;var o=new GroupObject(n);o.drawGroup();var a=new TextObject(t);a.drawText(o.groupId,startX-100,startY+30);var d=new GroupObject(n);if(d.drawGroup(o.groupId),0==e.length){var s=new LineObject("down");s.drawLine(d.groupId),startY-=50}else for(var l=0;l<e.length;l++){var c=new arrayCellWithTextObject(l,e[l]);if(Array.isArray(e[l]))if(i===!0){groupNumber=highestBranchNumber++;var h=new GroupObject(n);h.drawGroup(d.groupId),c.textVal="["+e[l]+"]",c.drawArrayCellWithText(h.groupId),r.push([e[l],t+"["+l+"]",n,i,groupNumber,c.x,c.y,c.width])}else c.textVal="["+e[l]+"]",c.drawArrayCellWithText();else c.textVal=e[l],c.drawArrayCellWithText()}startX=120;var u=new Array;u[m]=new Array;for(var m=0;m<r.length;m++){u=r[m],groupNumber=u[4];var w=drawArray(u[0],u[1],u[2],u[3]),p=$("#"+w)[0].getBBox(),g=$("g[data-branch='"+$("#"+w).attr("data-branch")+"']:first").children("rect:first"),f=new ExpansionObject(g.attr("x"),parseInt(g.attr("y"))+parseInt(g.attr("height")),g.attr("width"),p.x,p.y,p.width,$(w).attr("data-branch"),w);f.drawExpansion()}return d.groupId}function startGraph(e){var t=new EllipseWithTextObject(e);t.textVal="Start",t.drawEllipseWithText(),previousDrawnElement="start"}function endGraph(e){var t=new LineObject("down");t.drawLine();var n=new ArrowObject("down");n.drawArrow();var i=new EllipseWithTextObject(e);i.textVal="The End",i.drawEllipseWithText(),$("g:empty").remove(),viewBoxVal="0 0 "+parseInt(startY+50)+" "+parseInt(largestX+125),$("svg").attr("height",largestY+100),$("svg").attr("width",largestX+125)}function drawConditionSwitch(e,t){return conditionId=highestId++,previousDrawnElement="switch",condition[conditionId]={textForSwitch:e,casesForSwitch:[]},conditionId}function drawConditionDo(e,t){return e=highestId++,condition[e].reconnect=[startX,startY+unitVertical/2],previousDrawnElement="do",e}function drawConditionWhileTrue(e,t,n){var i=new LineObject("down");i.drawLine();var r=new ArrowObject("down");r.drawArrow(),conditionId=highestId++;var o=new DiamondWithTextObject(t);o.textVal=e,o.drawDiamondWithText(),groupNumber=branchNumber+1;var a=new GroupObject(t);a.drawGroup();var d=new TextObject("yes");return d.drawText(a.groupId),branchNumber+=1,condition[conditionId]={parentBranch:branchNumber-1,branch1:branchNumber,endBranch1:[startX,startY],branch2:null,endBranch2:[startNoX,startNoY],complete:!1,reconnect:[startX,startY-125]},null!=n&&(condition[conditionId].reconnect=n),previousDrawnElement="whileTrue",conditionId}function drawConditionWhileFalse(e,t){startNoX=condition[e].endBranch2[0],startNoY=condition[e].endBranch2[1],condition[e].endBranch1=[startX,startY],branchNumber++,nbBranches++,condition[e].branch2=branchNumber,groupNumber=branchNumber;var n=new GroupObject(t);n.drawGroup();var i=new TextObject("no");i.drawText(n.groupId,startNoX);var r=new LineObject("right");r.x1=condition[e].endBranch2[0],r.y1=condition[e].endBranch2[1],r.x2=r.x1+3*unitHorizontal+3.5*unitHorizontal*outerLevel,r.y2=r.y1,r.drawLine(),previousDrawnElement="whileFalse"}function drawConditionEndWhileTrue(e,t){var n=$("#svgContainer");n.position();condition[e].endBranch1=[startX,startY];var i,r;groupNumber=condition[e].branch1;var o=new GroupObject(t);o.drawGroup(),i=parseInt(condition[e].endBranch1[0]),r=parseInt(condition[e].endBranch1[1]);var a=new LineObject("down");if(a.drawLine(o.groupId),0!=furthestWhileY)for(;startY-20<furthestWhileY;){var a=new LineObject("down");a.drawLine(o.groupId)}startY>furthestWhileY&&(furthestWhileY=startY);var d=new LineObject("left");if(d.drawLine(o.groupId),500==furthestWhileX)for(;startX+120>condition[e].reconnect[0];){var d=new LineObject("left");d.drawLine(o.groupId)}else for(;startX>furthestWhileX;){var d=new LineObject("left");d.drawLine(o.groupId)}startX<furthestWhileX&&(furthestWhileX=startX,needToTranslate=70-furthestWhileX);var s=new LineObject("up");s.x1=startX,s.y1=startY,s.x2=startX,s.y2=condition[e].reconnect[1],s.drawLine(o.groupId);var s=new LineObject("right");s.x1=startX,s.y1=condition[e].reconnect[1],s.x2=condition[e].reconnect[0],s.y2=condition[e].reconnect[1],s.drawLine(o.groupId),arrow=new ArrowObject("right"),arrow.drawArrow(o.groupId),nbBranches--,groupNumber=condition[e].parentBranch;var o=new GroupObject(t);o.drawGroup(),condition[e].complete=!0;var l=condition[e].parentBranch;groupNumber=l,previousDrawnElement="endWhileTrue"}function drawConditionIf(e,t){var n=new LineObject("down");n.drawLine();var i=new ArrowObject("down");i.drawArrow(),conditionId=highestId++;var r=new DiamondWithTextObject(t);r.textVal=e,r.drawDiamondWithText(),groupNumber=branchNumber+1;var o=new GroupObject(t);o.drawGroup();var a=new TextObject("yes");return a.drawText(o.groupId),branchNumber+=1,condition[conditionId]={parentBranch:branchNumber-1,branch1:branchNumber,endBranch1:[startX,startY],branch2:null,endBranch2:[startNoX,startNoY],complete:!1},previousDrawnElement="if",conditionId}function drawConditionCaseIf(e,t,n){if(inSwitch<1||"switch"==previousDrawnElement){var i=new LineObject("down");i.drawLine();var r=new ArrowObject("down");r.drawArrow()}else startX+=unitHorizontal,startY-=unitVertical;"fallthrough"!=n&&"multiple"!=n||(conditionIdToConnect=condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch.pop()),conditionId=highestId++,condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch.push(conditionId);var o=new DiamondWithTextObject(t);o.textVal=e,o.drawDiamondWithText(),groupNumber=branchNumber+1;var a=new GroupObject(t);a.drawGroup();var d=new TextObject("yes");if(d.drawText(a.groupId),branchNumber+=1,condition[conditionId]={parentBranch:branchNumber-1,branch1:branchNumber,endBranch1:[startX,startY],branch2:null,endBranch2:[startNoX,startNoY],complete:!1},0!=conditionIdToConnect){var a=new GroupObject(t);a.drawGroup();var s=new LineObject("down");s.x1=condition[conditionIdToConnect].endBranch1[0],s.y1=condition[conditionIdToConnect].endBranch1[1],s.x2=s.x1,"multiple"==n?s.y2=s.y1+unitVertical/2:s.y2=s.y1+unitVertical,s.drawLine(a.groupId),condition[conditionIdToConnect].endBranch1[0]=s.x2,condition[conditionIdToConnect].endBranch1[1]=s.y2;var s=new LineObject("right");s.x1=condition[conditionIdToConnect].endBranch1[0],s.y1=condition[conditionIdToConnect].endBranch1[1],s.x2=(s.x1+condition[conditionId].endBranch1[0])/2,s.y2=s.y1,s.drawLine(a.groupId),condition[conditionIdToConnect].endBranch1[0]=s.x2,condition[conditionIdToConnect].endBranch1[1]=s.y2;var s=new LineObject("up");s.x1=condition[conditionIdToConnect].endBranch1[0],s.y1=condition[conditionIdToConnect].endBranch1[1],s.x2=s.x1,s.y2=condition[conditionId].endBranch1[1]+unitVertical/2,s.drawLine(a.groupId),condition[conditionIdToConnect].endBranch1[0]=s.x2,condition[conditionIdToConnect].endBranch1[1]=s.y2;var s=new LineObject("right");s.x1=condition[conditionIdToConnect].endBranch1[0],s.y1=condition[conditionIdToConnect].endBranch1[1],s.x2=s.y2=condition[conditionId].endBranch1[0],s.y2=s.y1,s.drawLine(a.groupId),standardArrow=new ArrowObject("right"),standardArrow.drawArrow(a.groupId),startY-=unitVertical/2,conditionIdToConnect=0}return previousDrawnElement="caseIf",conditionId}function drawConditionElse(e,t){startNoX=condition[e].endBranch2[0],startNoY=condition[e].endBranch2[1],condition[e].endBranch1=[startX,startY],branchNumber++,nbBranches++,condition[e].branch2=branchNumber,groupNumber=branchNumber;var n=new GroupObject(t);n.drawGroup();var i=new TextObject("no");i.drawText(n.groupId,startNoX);var r=new LineObject("right");r.x1=condition[e].endBranch2[0],r.y1=condition[e].endBranch2[1],r.x2=r.x1+3*unitHorizontal+3.5*unitHorizontal*outerLevel,r.y2=r.y1,r.drawLine(n.groupId),previousDrawnElement="else"}function drawConditionCaseElse(e,t,n){startNoX=condition[e].endBranch2[0],startNoY=condition[e].endBranch2[1],condition[e].endBranch1=[startX,startY],branchNumber++,nbBranches++,condition[e].branch2=branchNumber,groupNumber=branchNumber;var i=new GroupObject(t);i.drawGroup();var r=new TextObject("no");r.drawText(i.groupId,startNoX);var o=new LineObject("right");if(o.x1=condition[e].endBranch2[0],o.y1=condition[e].endBranch2[1],o.x2=o.x1+3*unitHorizontal+3.5*unitHorizontal*outerLevel,o.y2=o.y1,o.drawLine(i.groupId),previousDrawnElement="caseElse",condition[e].endBranch2[0]=startX,condition[e].endBranch2[1]=startY,"fallthrough"===n||"multiple"===n){alert("in else with FT"),condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch.pop();var i=new GroupObject(t);i.drawGroup();var o=new LineObject("down");o.x1=condition[e].endBranch1[0],o.y1=condition[e].endBranch1[1],o.x2=o.x1,"multiple"==n?o.y2=o.y1+unitVertical/2:o.y2=o.y1+unitVertical,o.drawLine(i.groupId),condition[e].endBranch1[0]=o.x2,condition[e].endBranch1[1]=o.y2;var o=new LineObject("right");o.x1=condition[e].endBranch1[0],o.y1=condition[e].endBranch1[1],o.x2=(o.x1+condition[e].endBranch2[0])/2,o.y2=o.y1,o.drawLine(i.groupId),condition[e].endBranch1[0]=o.x2,condition[e].endBranch1[1]=o.y2;var o=new LineObject("up");o.x1=condition[e].endBranch1[0],o.y1=condition[e].endBranch1[1],o.x2=o.x1,o.y2=startNoY+unitVertical/2,o.drawLine(i.groupId),condition[e].endBranch1[0]=o.x2,condition[e].endBranch1[1]=o.y2;var o=new LineObject("right");o.x1=condition[e].endBranch1[0],o.y1=condition[e].endBranch1[1],o.x2=o.y2=condition[e].endBranch2[0],o.y2=o.y1,o.drawLine(i.groupId),standardArrow=new ArrowObject("right"),standardArrow.drawArrow(i.groupId),startY-=unitVertical/2,conditionIdToConnect=0,startX=condition[e].endBranch2[0],startY=condition[e].endBranch2[1]}}function drawConditionEndIfElse(e,t){var n=$("#svgContainer");n.position();condition[e].endBranch2=[startX,startY];var i,r;if(condition[e].endBranch1[1]>=condition[e].endBranch2[1]){groupNumber=condition[e].branch1;var o=new GroupObject(t);o.drawGroup(),i=parseInt(condition[e].endBranch1[0]),r=parseInt(condition[e].endBranch1[1]);var a=new LineObject("down");a.x1=condition[e].endBranch1[0],a.y1=condition[e].endBranch1[1],a.x2=a.x1,a.y2=a.y1+unitVertical,a.drawLine(o.groupId),condition[e].endBranch1=[startX,startY];var d=new LineObject("right");d.x1=condition[e].endBranch1[0],d.y1=condition[e].endBranch1[1],d.x2=(condition[e].endBranch2[0]+condition[e].endBranch1[0])/2,d.y2=condition[e].endBranch1[1],d.drawLine(o.groupId),groupNumber=condition[e].branch2;var o=new GroupObject(t);o.drawGroup();var d=new LineObject("down");d.x1=condition[e].endBranch2[0],d.y1=condition[e].endBranch2[1],d.x2=condition[e].endBranch2[0],d.y2=condition[e].endBranch1[1],d.drawLine(o.groupId);var d=new LineObject("left");d.x1=condition[e].endBranch2[0],d.y1=condition[e].endBranch1[1],d.x2=(condition[e].endBranch2[0]+condition[e].endBranch1[0])/2,d.y2=condition[e].endBranch1[1],d.drawLine(o.groupId),startX=d.x2,startY=d.y2}else{groupNumber=condition[e].branch2;var o=new GroupObject(t);o.drawGroup(),i=parseInt(condition[e].endBranch2[0]),r=parseInt(condition[e].endBranch2[1]);var a=new LineObject("down");a.x1=condition[e].endBranch2[0],a.y1=condition[e].endBranch2[1],a.x2=a.x1,a.y2=a.y1+unitVertical,a.drawLine(o.groupId),condition[e].endBranch2=[startX,startY];var d=new LineObject("left");d.x1=condition[e].endBranch2[0],d.y1=condition[e].endBranch2[1],d.x2=(condition[e].endBranch1[0]+condition[e].endBranch2[0])/2,d.y2=condition[e].endBranch2[1],d.drawLine(o.groupId),groupNumber=condition[e].branch1;var o=new GroupObject(t);o.drawGroup();var d=new LineObject("down");d.x1=condition[e].endBranch1[0],d.y1=condition[e].endBranch1[1],d.x2=condition[e].endBranch1[0],d.y2=condition[e].endBranch2[1],d.drawLine(o.groupId);var d=new LineObject("right");d.x1=condition[e].endBranch1[0],d.y1=condition[e].endBranch2[1],d.x2=(condition[e].endBranch1[0]+condition[e].endBranch2[0])/2,d.y2=condition[e].endBranch2[1],d.drawLine(o.groupId),startX=d.x2,startY=d.y2}nbBranches--,groupNumber=condition[e].parentBranch;var o=new GroupObject(t);o.drawGroup(),condition[e].complete=!0;var s=condition[e].parentBranch;groupNumber=s,previousDrawnElement="endIfElse"}function drawConditionEndCaseIfElse(e,t){var n=$("#svgContainer");n.position();condition[e].endBranch2=[startX,startY];if("endCaseIfElse"!=previousDrawnElement){longestInSwitch=0;for(var i=0;i<condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch.length;i++)longestInSwitch<condition[condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch[i]].endBranch1[1]&&(longestInSwitch=condition[condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch[i]].endBranch1[1]),longestInSwitch<condition[condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch[i]].endBranch2[1]&&(longestInSwitch=condition[condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch[i]].endBranch2[1])}var r=(condition[condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch[0]].endBranch1[0]+condition[condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch[condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch.length-1]].endBranch2[0])/2;groupNumber=condition[e].branch1;var o=new GroupObject(t);o.drawGroup();var a=new LineObject("down");a.x1=condition[e].endBranch1[0],a.y1=condition[e].endBranch1[1],a.x2=a.x1,a.y2=longestInSwitch+unitVertical,a.drawLine(o.groupId),condition[e].endBranch1=[startX,startY];var d=new LineObject("right");d.x1=condition[e].endBranch1[0],d.y1=startY,d.x2=r,d.y2=startY,d.drawLine(o.groupId);var a=new LineObject("down");a.x1=condition[e].endBranch2[0],a.y1=condition[e].endBranch2[1],a.x2=a.x1,a.y2=longestInSwitch+unitVertical,a.drawLine(o.groupId);var d=new LineObject("left");d.x1=condition[e].endBranch2[0],d.y1=startY,d.x2=r,d.y2=startY,d.drawLine(o.groupId),nbBranches--,startX=r,startY=longestInSwitch+unitVertical,groupNumber=condition[e].parentBranch;var o=new GroupObject(t);o.drawGroup(),condition[e].complete=!0;var s=condition[e].parentBranch;groupNumber=s,previousDrawnElement="endCaseIfElse"}function drawStatement(e,t){var n=new LineObject("down");n.drawLine(),arrow=new ArrowObject("down"),arrow.drawArrow();var i=new RectangleWithTextObject(t);i.textVal=e,i.drawRectangleWithText(),previousDrawnElement="break;"===e?"break":"statement"}function generateArrayChart(e){new Array,new Array;console.log("Generating ArrayChart");var t=$("#codeSource").text().split("\n");console.log("Clearing ArrayChart"),$("#svgContainer").html("<svg id='svgOne'>Sorry, your browser does not support inline SVG</svg>"),nbBranches=0;var n=0;branchNumber=0,groupNumber=0,highestId=1,startX=120,largestX=startX,startY=20,largestY=startY,unitVertical=50,unitHorizontal=50,startNoX=0,startNoY=0,TextVal="",groupIsComplete=!0,step=0,maxLine=16,executeFullOn=!1,furthestWhileX=500,furthestWhileY=0;var i="";null!=document.getElementById("sandboxScript")&&$("sandboxScript").remove(this),js=document.createElement("script"),js.id="sandboxScript";for(var r=0;r<t.length;r++){if(trimmedLine=t[r].trim(),""==trimmedLine)n=r+1;else if(trimmedLine.indexOf("new Array")!=-1){if(n=r+1,startCut=trimmedLine.indexOf(" "),endCut=trimmedLine.indexOf("="),startCut==-1||endCut==-1)throw new Error("there seems to be a problem with your array declaration at line "+n)}else if(trimmedLine.indexOf("drawArray")!=-1){n=r+1,startCut=trimmedLine.indexOf("("),endCut=trimmedLine.indexOf(")");var o=trimmedLine.slice(startCut+1,endCut).split(",");o.length>1?trimmedLine=trimmedLine.slice(0,startCut)+"( "+o[0]+', "'+o[0]+'", '+n+", "+o[1]+" );":trimmedLine=trimmedLine.slice(0,endCut)+', "'+trimmedLine.slice(startCut+1,endCut)+'", '+n+" );"}i+=trimmedLine}js.innerHTML=i,document.body.appendChild(js),console.log("ArrayChart generation completed")}function generateFlowChart(e){console.log("Generating FlowChart");var t,n,i,r=new Array,o=0,a=new Array,d=new Array,s=new Array,l=!1,c=new Array,h=new Array,u=(new Array,new Array),m=$("#codeSource").text().split("\n");console.log("Clearing FlowChart"),$("#svgContainer").html("<svg id='svgOne'>Sorry, your browser does not support inline SVG</svg>"),nbBranches=0,branchNumber=0,groupNumber=0,conditionId=1,highestId=1,previousDrawnElement="initial";var w=[];outerLevel=0,startX=120,largestX=startX,startY=20,largestY=startY,unitVertical=50,unitHorizontal=50,startNoX=0,startNoY=0,TextVal="",groupIsComplete=!0,step=0,executeFullOn=!1,furthestWhileX=500,furthestWhileY=0;m.length+1;startGraph("0"),w.push('startGraph( "0" )');try{for(var p=0;p<m.length;p++)if(trimmedLine=m[p].trim(),""==trimmedLine)lineNum=p+1;else if("if"==trimmedLine.substring(0,2)){lineNum=p+1;var g=trimmedLine.indexOf("//");if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionIf(f,lineNum),w.push("drawConditionIf( "+f+", "+lineNum+" )")}else{if(t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),t==-1||n==-1)throw new Error("your if statement at line "+lineNum+" requires the condition to be surrounded by parentheses: <br><br>if (condition) {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement1;<br>} else {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement2;<br> }");o=drawConditionIf(trimmedLine.slice(t+1,n),lineNum),w.push("drawConditionIf( "+trimmedLine.slice(t+1,n)+", "+lineNum+" )")}if(console.log("drawConditionIf( "+trimmedLine+", "+lineNum+" );"),d.push(o),r[o]="if",s[o]=!1,a[o]=1,trimmedLine.indexOf("{")==-1){if("{"!=m[p+1].trim().substring(0,1))throw new Error("your if statement at line "+lineNum+' requires statements to be surrounded by curly braces: <pre class="language-javascript"><code id="error-message">if (condition) {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement1;<br>} else {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement2;<br>}</code></pre>');p++}}else if("switch"==trimmedLine.substring(0,6))inSwitch+=1,lineNum=p+1,t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),o=drawConditionSwitch(trimmedLine.slice(t+1,n),lineNum),w.push("drawConditionSwitch( "+trimmedLine.slice(t+1,n)+", "+lineNum+" )"),console.log("drawConditionSwitch( "+trimmedLine.slice(t+1,n)+", "+lineNum+" );"),conditionSwitch.push(o),d.push(o),r[o]="switch";else if("case"==trimmedLine.substring(0,4))if("switch"!=previousDrawnElement){u[conditionSwitch[conditionSwitch.length-1]]+=1;for(var b=w.length,v=b;v>0;v--)if("drawConditionEndIfElse"==w[v-1].substring(0,22))outerLevel+=1,o-=1;else if("drawConditionIf"==w[v-1].substring(0,15))break;lineNum=p+1;var i=d.pop();if(o=i,alert(e),"break"===previousDrawnElement||"break"!==previousDrawnElement&&"swift"===e?condition[o].hasBreak=!0:(condition[o].hasBreak=!1,"caseIf"===previousDrawnElement?condition[o].fallthrough="multiple":condition[o].fallthrough="fallthrough"),void 0==o)throw new Error("you are trying to close an operation at line "+(lineNum+1)+" that is either not opened or already closed, so your flowchart cannot be drawn correctly.");drawConditionCaseElse(o),w.push("drawConditionCaseElse( "+o+" )");var g=trimmedLine.indexOf("//");if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionCaseIf(f,lineNum),w.push("drawConditionCaseIf( "+f+", "+lineNum+" )")}else{t=5,n=trimmedLine.lastIndexOf(":");var C=condition[conditionSwitch[conditionSwitch.length-1]].textForSwitch;o=condition[o].hasBreak?drawConditionCaseIf(C+"="+trimmedLine.slice(t,n),lineNum):drawConditionCaseIf(C+"="+trimmedLine.slice(t,n),lineNum,condition[o].fallthrough),w.push("drawConditionCaseIf( "+C+"="+trimmedLine.slice(t,n)+", "+lineNum+" )")}s[o]=!0,d.push(o),r[o]="caseIf",s[o]=!1,console.log("drawConditionCaseIf( "+trimmedLine+", "+lineNum+" );")}else{u[conditionSwitch[conditionSwitch.length-1]]=1,lineNum=p+1;var g=trimmedLine.indexOf("//");if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionCaseIf(f,lineNum),w.push("drawConditionCaseIf( "+f+", "+lineNum+" )")}else{t=5,n=trimmedLine.lastIndexOf(":");var C=condition[conditionSwitch[conditionSwitch.length-1]].textForSwitch;o=drawConditionCaseIf(C+"="+trimmedLine.slice(t,n),lineNum),w.push("drawConditionCaseIf( "+C+"="+trimmedLine.slice(t,n)+", "+lineNum+" )")}console.log("drawConditionCaseIf( "+C+"="+trimmedLine.slice(t,n)+", "+lineNum+" )"),d.push(o),r[o]="caseIf",s[o]=!1,u[conditionSwitch[conditionSwitch.length-1]]+=1}else if("default"==trimmedLine.substring(0,7)){for(var b=w.length,I=b;I>0;I--)if("drawConditionEndIfElse"==w[I-1].substring(0,22))outerLevel+=1;else if("drawConditionIf"==w[I-1].substring(0,15))break;lineNum=p+1,"break"===previousDrawnElement?condition[o].hasBreak=!0:(condition[o].hasBreak=!1,"caseIf"===previousDrawnElement?condition[o].fallthrough="multiple":condition[o].fallthrough="fallthrough"),condition[o].hasBreak?drawConditionCaseElse(o,lineNum):drawConditionCaseElse(o,lineNum,condition[o].fallthrough),w.push("drawConditionCaseElse( "+o+" )"),console.log("drawConditionCaseElse( "+o+" );"),s[o]=!0}else if("while"==trimmedLine.substring(0,5)){lineNum=p+1;var g=trimmedLine.indexOf("//"),b=w.length;if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionWhileTrue(f,lineNum),w.push("drawConditionWhileTrue( "+f+", "+lineNum+" )")}else t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),o=drawConditionWhileTrue(trimmedLine.slice(t+1,n),lineNum),w.push("drawConditionWhileTrue( "+trimmedLine.slice(t+1,n)+", "+lineNum+" )");console.log("drawConditionWhileTrue( "+trimmedLine+", "+lineNum+" );"),d.push(o),r[o]="while"}else if("for"==trimmedLine.substring(0,3)){lineNum=p+1;var g=trimmedLine.indexOf("//"),b=w.length;if(t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),t==-1||n==-1)throw new Error("your for loop at line "+lineNum+" requires parentheses, see for example:<br><br>for (var i = 0; i < 9; i++) { <br>&nbsp;&nbsp;&nbsp;&nbsp;console.log(i);<br>&nbsp;&nbsp;&nbsp;&nbsp;// more statements<br>}");var x=trimmedLine.slice(t+1,n),y=x.split(";");drawStatement(y[0],lineNum),w.push("drawStatement( "+y[0]+", "+lineNum+" )"),console.log("drawStatement( "+y[0]+", "+lineNum+" )"),o=drawConditionWhileTrue(y[1],lineNum),w.push("drawConditionWhileTrue( "+y[1]+", "+lineNum+" )"),console.log("drawConditionWhileTrue( "+y[1]+", "+lineNum+" );"),d.push(o),r[o]="for",h[o]=lineNum,c[o]=y[2]}else if("} else {"==trimmedLine.substring(0,8)){for(var b=w.length,I=b;I>0;I--)if("drawConditionEndIfElse"==w[I-1].substring(0,22))outerLevel+=1,o-=1;else if("drawConditionIf"==w[I-1].substring(0,15))break;lineNum=p+1,drawConditionElse(o),w.push("drawConditionElse( "+o+" )"),console.log("drawConditionElse( "+o+" );"),s[o]=!0}else if("} else if"==trimmedLine.substring(0,9)){for(var b=w.length,v=b;v>0;v--)if("drawConditionEndIfElse"==w[v-1].substring(0,22))outerLevel+=1,o-=1;else if("drawConditionIf"==w[v-1].substring(0,15))break;lineNum=p+1,drawConditionElse(o),w.push("drawConditionElse( "+o+" )");var g=trimmedLine.indexOf("//");if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionIf(f,lineNum),w.push("drawConditionIf( "+f+", "+lineNum+" )")}else{if(t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),t==-1||n==-1)throw new Error("your if statement at line "+lineNum+" requires the condition to be surrounded by parentheses: <br><br>if (condition) {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement1;<br>} else {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement2;<br> }");o=drawConditionIf(trimmedLine.slice(t+1,n),lineNum),w.push("drawConditionIf( "+trimmedLine.slice(t+1,n)+", "+lineNum+" )")}if(s[o]=!0,d.push(o),a[o]=a[d[d.length-2]]+1,r[o]="if",s[o]=!1,console.log("drawConditionIf( "+trimmedLine+", "+lineNum+" );"),trimmedLine.indexOf("{")==-1){if("{"!=m[p+1].trim().substring(0,1))throw new Error("your if statement at line "+lineNum+" requires statements to be surrounded by curly braces: <br><br>if (condition1) {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement1;<br>} else if (condition2) {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement2;<br> } else {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement3;<br> }");p++}}else if("do {"==trimmedLine.substring(0,4)||"do"==trimmedLine.substring(0,2)&&"{"==m[p+1])lineNum=p+1,o=drawConditionDo(o,lineNum),w.push("drawConditionDo( operationNum, lineNum )"),console.log("drawConditionDo( "+o+", "+lineNum+" );"),d.push(o),r[o]="do";else if("}"==trimmedLine.substring(0,1)){var i=d.pop();if(o=i,void 0==o)throw new Error("you are trying to close an operation at line "+(lineNum+1)+" that is either not opened or already closed, so your flowchart cannot be drawn correctly.");if(lineNum=p+1,"if"==r[o]){for(var f=trimmedLine.slice(g+2),b=w.length,v=b;v>0;v--)if("drawConditionEndIfElse"==w[v-1].substring(0,22)||"drawConditionWhileFalse"==w[v-1].substring(0,23))outerLevel+=1;else if("drawConditionIf"==w[v-1].substring(0,15))break;for(var N=0;N<w.length;N++){var L=w[N],E=w[N].split(" ");"drawConditionElse("!=L.substring(0,18)||E[1]!=i&&E[1]!=i+","||(l=!0)}for(0==l?(drawConditionElse(o,lineNum),w.push("drawConditionElse( "+o+", "+lineNum+" )"),console.log("drawConditionElse( "+o+", "+lineNum+" )")):l=!1,drawConditionEndIfElse(o,lineNum),w.push("drawConditionEndIfElse( "+o+", "+lineNum+" )"),console.log("drawConditionEndIfElse( "+o+", "+lineNum+" )");a[o]>1;){var i=d.pop();if(o=i,void 0==o)throw new Error("you are trying to close an operation at line "+(lineNum+1)+" that is either not opened or already closed, so your flowchart cannot be drawn correctly.");drawConditionEndIfElse(o,lineNum),w.push("drawConditionEndIfElse( "+o+", "+lineNum+" )"),console.log("drawConditionEndIfElse( "+o+", "+lineNum+" )")}}else if("do"==r[o]){if(trimmedLine.indexOf("while")!=-1){lineNum=p+1;var g=trimmedLine.indexOf("//"),b=w.length;if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionWhileTrue(f,lineNum,condition[o].reconnect),w.push("drawConditionWhileTrue( "+f+", "+lineNum+" )")}else t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),o=drawConditionWhileTrue(trimmedLine.slice(t+1,n),lineNum,condition[o].reconnect),w.push("drawConditionWhileTrue( "+trimmedLine.slice(t+1,n)+", "+lineNum+", "+condition[o].reconnect+" )");console.log("drawConditionWhileTrue( "+trimmedLine+", "+lineNum+" );");for(var b=w.length,B=b;B>0;B--)if("drawConditionEndIfElse"==w[B-1].substring(0,22)||"drawConditionWhileFalse"==w[B-1].substring(0,23))outerLevel+=1;else if("drawConditionIf"==w[B-1].substring(0,15))break;var f=trimmedLine.slice(g+2);drawConditionEndWhileTrue(o,lineNum),w.push("drawConditionEndWhileTrue( "+o+", "+lineNum+" )"),console.log("drawConditionEndWhileTrue( "+o+", "+lineNum+" )"),drawConditionWhileFalse(o,lineNum),w.push("drawConditionWhileFalse( "+o+", "+lineNum+" )"),console.log("drawConditionWhileFalse( "+i+", "+lineNum+" )")}}else if("while"==r[o]){for(var b=w.length,B=b;B>0;B--)if("drawConditionEndIfElse"==w[B-1].substring(0,22)||"drawConditionWhileFalse"==w[B-1].substring(0,23))outerLevel+=1;else if("drawConditionIf"==w[B-1].substring(0,15))break;var f=trimmedLine.slice(g+2);drawConditionEndWhileTrue(o,lineNum),w.push("drawConditionEndWhileTrue( "+o+", "+lineNum+" )"),console.log("drawConditionEndWhileTrue( "+o+", "+lineNum+" )"),drawConditionWhileFalse(o,lineNum),w.push("drawConditionWhileFalse( "+o+", "+lineNum+" )"),console.log("drawConditionWhileFalse( "+i+", "+lineNum+" )")}else if("caseIf"==r[o]){for(var f=trimmedLine.slice(g+2),b=w.length,v=b;v>0;v--)if("drawConditionEndIfElse"==w[v-1].substring(0,22)||"drawConditionWhileFalse"==w[v-1].substring(0,23))outerLevel+=1;else if("drawConditionIf"==w[v-1].substring(0,15))break;0==s[o]&&(drawConditionCaseElse(o,lineNum),w.push("drawConditionCaseElse( "+o+", "+lineNum+" )"),console.log("drawConditionCaseElse( "+o+", "+lineNum+" )"));for(var S=condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch,O=S.length-1;O>=0;O--)drawConditionEndCaseIfElse(S[O],lineNum),w.push("drawConditionEndCaseIfElse( "+S[O]+", "+lineNum+" )"),console.log("drawConditionEndCaseIfElse( "+S[O]+", "+lineNum+" )");d.pop()}else if("switch"==r[o]){alert("last case has "+s[o]);for(var S=condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch,T=S.length-1;T>=0;T--){var i=d.pop();o=i,conditionSwitch.pop()}inSwitch-=1;var i=d.pop();o=i}else if("for"==r[o]){for(var b=w.length,W=b;W>0;W--)if("drawConditionEndIfElse"==w[W-1].substring(0,22)||"drawConditionWhileFalse"==w[W-1].substring(0,23))outerLevel+=1;else if("drawConditionIf"==w[W-1].substring(0,15))break;drawStatement(c[o],h[o]),w.push("drawStatement( "+c[o]+", "+h[o]+" )"),console.log("drawStatement( "+c[o]+", "+h[o]+" )"),drawConditionEndWhileTrue(o,lineNum),w.push("drawConditionEndWhileTrue( "+o+", "+lineNum+" )"),console.log("drawConditionEndWhileTrue( "+o+", "+lineNum+" )"),drawConditionWhileFalse(o,lineNum),w.push("drawConditionWhileFalse( "+o+", "+lineNum+" )"),console.log("drawConditionWhileFalse( "+i+", "+lineNum+" )")}}else{lineNum=p+1;var g=trimmedLine.indexOf("//");if(g!=-1){var f=trimmedLine.slice(g+2);drawStatement(f,lineNum),w.push("drawStatement( "+f+", "+lineNum+" )"),console.log("drawStatement( "+f+", "+lineNum+" )")}else drawStatement(trimmedLine,lineNum),w.push("drawStatement( "+trimmedLine+", "+lineNum+" )"),console.log("drawStatement( "+trimmedLine+", "+lineNum+" )")}if(d.length>0){var A=d.length;throw $("#svgOne").remove(),1===A?new Error("in the code provided, "+d.length+" operation is not closed, so your flowchart cannot be drawn correctly."):new Error("in the code provided, "+d.length+" operations are not closed, so your flowchart cannot be drawn correctly.")}endGraph((m.length+1).toString()),w.push("endGraph( "+(m.length+1).toString()+" )"),console.log("FlowChart generation completed"),codePre=$("#ifelse"),svgGroup=$("g");for(var p=0;p<needToTranslate;p++)svgGroup.first().siblings().attr("transform","translate( "+needToTranslate+", 0 )"),svgGroup.first().attr("transform","translate( "+needToTranslate+", 0 )"),$("svg").attr("width",largestX+225)}catch(e){$("#svgContainer").html("<div class='errorMessage'>"+e+"<br><br>Please note that if there are more than one issues with your code, only the first error will be displayed here.</div>"),console.log("There is a problem with the code that you provided:\n "+e)}}function generateFlowChart(e){console.log("Generating FlowChart");var t,n,i,r=new Array,o=0,a=new Array,d=new Array,s=new Array,l=!1,c=new Array,h=new Array,u=(new Array,new Array),m=$("#codeSource").text().split("\n");console.log("Clearing FlowChart"),$("#svgContainer").html("<svg id='svgOne'>Sorry, your browser does not support inline SVG</svg>"),nbBranches=0,branchNumber=0,groupNumber=0,conditionId=1,highestId=1,previousDrawnElement="initial";var w=[];outerLevel=0,startX=170,largestX=startX,startY=20,largestY=startY,unitVertical=50,unitHorizontal=50,startNoX=0,startNoY=0,TextVal="",groupIsComplete=!0,step=0,maxLine=16,executeFullOn=!1,furthestWhileX=500,furthestWhileY=0,startGraph("0"),w.push('startGraph( "0" )');try{for(var p=0;p<m.length;p++)if(trimmedLine=m[p].trim(),""==trimmedLine)lineNum=p+1;else if("if"==trimmedLine.substring(0,2)){lineNum=p+1;var g=trimmedLine.indexOf("//");if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionIf(f,lineNum),w.push("drawConditionIf( "+f+", "+lineNum+" )");
}else{if(t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),t==-1||n==-1)throw new Error("your if statement at line "+lineNum+" requires the condition to be surrounded by parentheses: <br><br>if (condition) {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement1;<br>} else {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement2;<br> }");o=drawConditionIf(trimmedLine.slice(t+1,n),lineNum),w.push("drawConditionIf( "+trimmedLine.slice(t+1,n)+", "+lineNum+" )")}if(console.log("drawConditionIf( "+trimmedLine+", "+lineNum+" );"),d.push(o),r[o]="if",s[o]=!1,a[o]=1,trimmedLine.indexOf("{")==-1){if("{"!=m[p+1].trim().substring(0,1))throw new Error("your if statement at line "+lineNum+' requires statements to be surrounded by curly braces: <pre class="language-javascript"><code id="error-message">if (condition) {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement1;<br>} else {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement2;<br>}</code></pre>');p++}}else if("switch"==trimmedLine.substring(0,6))inSwitch+=1,lineNum=p+1,t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),o=drawConditionSwitch(trimmedLine.slice(t+1,n),lineNum),w.push("drawConditionSwitch( "+trimmedLine.slice(t+1,n)+", "+lineNum+" )"),console.log("drawConditionSwitch( "+trimmedLine.slice(t+1,n)+", "+lineNum+" );"),conditionSwitch.push(o),d.push(o),r[o]="switch";else if("case"==trimmedLine.substring(0,4))if("switch"!=previousDrawnElement){u[conditionSwitch[conditionSwitch.length-1]]+=1;for(var b=w.length,v=b;v>0;v--){if("drawConditionEndIfElse"==w[v-1].substring(0,22)){outerLevel+=1,o-=1;break}if("drawConditionIf"==w[v-1].substring(0,15))break}lineNum=p+1;var i=d.pop();if(o=i,"break"===previousDrawnElement?condition[o].hasBreak=!0:(condition[o].hasBreak=!1,"caseIf"===previousDrawnElement?condition[o].fallthrough="multiple":condition[o].fallthrough="fallthrough"),void 0==o)throw new Error("you are trying to close an operation at line "+(lineNum+1)+" that is either not opened or already closed, so your flowchart cannot be drawn correctly.");drawConditionCaseElse(o),w.push("drawConditionCaseElse( "+o+" )");var g=trimmedLine.indexOf("//");if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionCaseIf(f,lineNum),w.push("drawConditionCaseIf( "+f+", "+lineNum+" )")}else{t=5,n=trimmedLine.lastIndexOf(":");var C=condition[conditionSwitch[conditionSwitch.length-1]].textForSwitch;o=condition[o].hasBreak?drawConditionCaseIf(C+"="+trimmedLine.slice(t,n),lineNum):drawConditionCaseIf(C+"="+trimmedLine.slice(t,n),lineNum,condition[o].fallthrough),w.push("drawConditionCaseIf( "+C+"="+trimmedLine.slice(t,n)+", "+lineNum+" )")}s[o]=!0,d.push(o),r[o]="caseIf",s[o]=!1,console.log("drawConditionCaseIf( "+trimmedLine+", "+lineNum+" );")}else{u[conditionSwitch[conditionSwitch.length-1]]=1,lineNum=p+1;var g=trimmedLine.indexOf("//");if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionCaseIf(f,lineNum),w.push("drawConditionCaseIf( "+f+", "+lineNum+" )")}else{t=5,n=trimmedLine.lastIndexOf(":");var C=condition[conditionSwitch[conditionSwitch.length-1]].textForSwitch;o=drawConditionCaseIf(C+"="+trimmedLine.slice(t,n),lineNum),w.push("drawConditionCaseIf( "+C+"="+trimmedLine.slice(t,n)+", "+lineNum+" )")}console.log("drawConditionCaseIf( "+C+"="+trimmedLine.slice(t,n)+", "+lineNum+" )"),d.push(o),r[o]="caseIf",s[o]=!1,u[conditionSwitch[conditionSwitch.length-1]]+=1}else if("default"==trimmedLine.substring(0,7)){for(var b=w.length,I=b;I>0;I--){if("drawConditionEndIfElse"==w[I-1].substring(0,22)){outerLevel+=1;break}if("drawConditionIf"==w[I-1].substring(0,15))break}lineNum=p+1,"break"===previousDrawnElement?condition[o].hasBreak=!0:(condition[o].hasBreak=!1,"caseIf"===previousDrawnElement?condition[o].fallthrough="multiple":condition[o].fallthrough="fallthrough"),condition[o].hasBreak?drawConditionCaseElse(o,lineNum):drawConditionCaseElse(o,lineNum,condition[o].fallthrough),w.push("drawConditionCaseElse( "+o+" )"),console.log("drawConditionCaseElse( "+o+" );"),s[o]=!0}else if("while"==trimmedLine.substring(0,5)){lineNum=p+1;var g=trimmedLine.indexOf("//"),b=w.length;if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionWhileTrue(f,lineNum),w.push("drawConditionWhileTrue( "+f+", "+lineNum+" )")}else t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),o=drawConditionWhileTrue(trimmedLine.slice(t+1,n),lineNum),w.push("drawConditionWhileTrue( "+trimmedLine.slice(t+1,n)+", "+lineNum+" )");console.log("drawConditionWhileTrue( "+trimmedLine+", "+lineNum+" );"),d.push(o),r[o]="while"}else if("for"==trimmedLine.substring(0,3)){lineNum=p+1;var g=trimmedLine.indexOf("//"),b=w.length;if(t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),t==-1||n==-1)throw new Error("your for loop at line "+lineNum+" requires parentheses, see for example:<br><br>for (var i = 0; i < 9; i++) { <br>&nbsp;&nbsp;&nbsp;&nbsp;console.log(i);<br>&nbsp;&nbsp;&nbsp;&nbsp;// more statements<br>}");var x=trimmedLine.slice(t+1,n),y=x.split(";");drawStatement(y[0],lineNum),w.push("drawStatement( "+y[0]+", "+lineNum+" )"),console.log("drawStatement( "+y[0]+", "+lineNum+" )"),o=drawConditionWhileTrue(y[1],lineNum),w.push("drawConditionWhileTrue( "+y[1]+", "+lineNum+" )"),console.log("drawConditionWhileTrue( "+y[1]+", "+lineNum+" );"),d.push(o),r[o]="for",h[o]=lineNum,c[o]=y[2]}else if("} else {"==trimmedLine.substring(0,8)){for(var b=w.length,I=b;I>0;I--){if("drawConditionEndIfElse"==w[I-1].substring(0,22)){outerLevel+=1,o-=1;break}if("drawConditionIf"==w[I-1].substring(0,15))break}lineNum=p+1,drawConditionElse(o),w.push("drawConditionElse( "+o+" )"),console.log("drawConditionElse( "+o+" );"),s[o]=!0}else if("} else if"==trimmedLine.substring(0,9)){for(var b=w.length,v=b;v>0;v--){if("drawConditionEndIfElse"==w[v-1].substring(0,22)){outerLevel+=1,o-=1;break}if("drawConditionIf"==w[v-1].substring(0,15))break}lineNum=p+1,drawConditionElse(o),w.push("drawConditionElse( "+o+" )");var g=trimmedLine.indexOf("//");if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionIf(f,lineNum),w.push("drawConditionIf( "+f+", "+lineNum+" )")}else{if(t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),t==-1||n==-1)throw new Error("your if statement at line "+lineNum+" requires the condition to be surrounded by parentheses: <br><br>if (condition) {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement1;<br>} else {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement2;<br> }");o=drawConditionIf(trimmedLine.slice(t+1,n),lineNum),w.push("drawConditionIf( "+trimmedLine.slice(t+1,n)+", "+lineNum+" )")}if(s[o]=!0,d.push(o),a[o]=a[d[d.length-2]]+1,r[o]="if",s[o]=!1,console.log("drawConditionIf( "+trimmedLine+", "+lineNum+" );"),trimmedLine.indexOf("{")==-1){if("{"!=m[p+1].trim().substring(0,1))throw new Error("your if statement at line "+lineNum+" requires statements to be surrounded by curly braces: <br><br>if (condition1) {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement1;<br>} else if (condition2) {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement2;<br> } else {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement3;<br> }");p++}}else if("do {"==trimmedLine.substring(0,4)||"do"==trimmedLine.substring(0,2)&&"{"==m[p+1])lineNum=p+1,o=drawConditionDo(o,lineNum),w.push("drawConditionDo( operationNum, lineNum )"),console.log("drawConditionDo( "+o+", "+lineNum+" );"),d.push(o),r[o]="do";else if("}"==trimmedLine.substring(0,1)){var i=d.pop();if(o=i,void 0==o)throw new Error("you are trying to close an operation at line "+(lineNum+1)+" that is either not opened or already closed, so your flowchart cannot be drawn correctly.");if(lineNum=p+1,"if"==r[o]){for(var f=trimmedLine.slice(g+2),b=w.length,v=b;v>0;v--){if("drawConditionEndIfElse"==w[v-1].substring(0,22)||"drawConditionWhileFalse"==w[v-1].substring(0,23)){outerLevel+=1;break}if("drawConditionIf"==w[v-1].substring(0,15))break}for(var N=0;N<w.length;N++){var L=w[N],E=w[N].split(" ");"drawConditionElse("!=L.substring(0,18)||E[1]!=i&&E[1]!=i+","||(l=!0)}for(0==l?(drawConditionElse(o,lineNum),w.push("drawConditionElse( "+o+", "+lineNum+" )"),console.log("drawConditionElse( "+o+", "+lineNum+" )")):l=!1,drawConditionEndIfElse(o,lineNum),w.push("drawConditionEndIfElse( "+o+", "+lineNum+" )"),console.log("drawConditionEndIfElse( "+o+", "+lineNum+" )");a[o]>1;){var i=d.pop();if(o=i,void 0==o)throw new Error("you are trying to close an operation at line "+(lineNum+1)+" that is either not opened or already closed, so your flowchart cannot be drawn correctly.");drawConditionEndIfElse(o,lineNum),w.push("drawConditionEndIfElse( "+o+", "+lineNum+" )"),console.log("drawConditionEndIfElse( "+o+", "+lineNum+" )")}}else if("do"==r[o]){if(trimmedLine.indexOf("while")!=-1){lineNum=p+1;var g=trimmedLine.indexOf("//"),b=w.length;if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionWhileTrue(f,lineNum,condition[o].reconnect),w.push("drawConditionWhileTrue( "+f+", "+lineNum+" )")}else t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),o=drawConditionWhileTrue(trimmedLine.slice(t+1,n),lineNum,condition[o].reconnect),w.push("drawConditionWhileTrue( "+trimmedLine.slice(t+1,n)+", "+lineNum+", "+condition[o].reconnect+" )");console.log("drawConditionWhileTrue( "+trimmedLine+", "+lineNum+" );");for(var b=w.length,B=b;B>0;B--){if("drawConditionEndIfElse"==w[B-1].substring(0,22)||"drawConditionWhileFalse"==w[B-1].substring(0,23)){outerLevel+=1;break}if("drawConditionIf"==w[B-1].substring(0,15))break}var f=trimmedLine.slice(g+2);drawConditionEndWhileTrue(o,lineNum),w.push("drawConditionEndWhileTrue( "+o+", "+lineNum+" )"),console.log("drawConditionEndWhileTrue( "+o+", "+lineNum+" )"),drawConditionWhileFalse(o,lineNum),w.push("drawConditionWhileFalse( "+o+", "+lineNum+" )"),console.log("drawConditionWhileFalse( "+i+", "+lineNum+" )")}}else if("while"==r[o]){for(var b=w.length,B=b;B>0;B--){if("drawConditionEndIfElse"==w[B-1].substring(0,22)||"drawConditionWhileFalse"==w[B-1].substring(0,23)){outerLevel+=1;break}if("drawConditionIf"==w[B-1].substring(0,15))break}var f=trimmedLine.slice(g+2);drawConditionEndWhileTrue(o,lineNum),w.push("drawConditionEndWhileTrue( "+o+", "+lineNum+" )"),console.log("drawConditionEndWhileTrue( "+o+", "+lineNum+" )"),drawConditionWhileFalse(o,lineNum),w.push("drawConditionWhileFalse( "+o+", "+lineNum+" )"),console.log("drawConditionWhileFalse( "+i+", "+lineNum+" )")}else if("caseIf"==r[o]){for(var f=trimmedLine.slice(g+2),b=w.length,v=b;v>0;v--){if("drawConditionEndIfElse"==w[v-1].substring(0,22)||"drawConditionWhileFalse"==w[v-1].substring(0,23)){outerLevel+=1;break}if("drawConditionIf"==w[v-1].substring(0,15))break}0==s[o]&&(drawConditionCaseElse(o,lineNum),w.push("drawConditionCaseElse( "+o+", "+lineNum+" )"),console.log("drawConditionCaseElse( "+o+", "+lineNum+" )"));for(var S=condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch,O=S.length-1;O>=0;O--)drawConditionEndCaseIfElse(S[O],lineNum),w.push("drawConditionEndCaseIfElse( "+S[O]+", "+lineNum+" )"),console.log("drawConditionEndCaseIfElse( "+S[O]+", "+lineNum+" )");d.pop()}else if("switch"==r[o]){alert("last case has "+s[o]);for(var S=condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch,T=S.length-1;T>=0;T--){var i=d.pop();o=i,conditionSwitch.pop()}inSwitch-=1;var i=d.pop();o=i}else if("for"==r[o]){for(var b=w.length,W=b;W>0;W--){if("drawConditionEndIfElse"==w[W-1].substring(0,22)||"drawConditionWhileFalse"==w[W-1].substring(0,23)){outerLevel+=1;break}if("drawConditionIf"==w[W-1].substring(0,15))break}drawStatement(c[o],h[o]),w.push("drawStatement( "+c[o]+", "+h[o]+" )"),console.log("drawStatement( "+c[o]+", "+h[o]+" )"),drawConditionEndWhileTrue(o,lineNum),w.push("drawConditionEndWhileTrue( "+o+", "+lineNum+" )"),console.log("drawConditionEndWhileTrue( "+o+", "+lineNum+" )"),drawConditionWhileFalse(o,lineNum),w.push("drawConditionWhileFalse( "+o+", "+lineNum+" )"),console.log("drawConditionWhileFalse( "+i+", "+lineNum+" )")}}else{lineNum=p+1;var g=trimmedLine.indexOf("//");if(g!=-1){var f=trimmedLine.slice(g+2);drawStatement(f,lineNum),w.push("drawStatement( "+f+", "+lineNum+" )"),console.log("drawStatement( "+f+", "+lineNum+" )")}else drawStatement(trimmedLine,lineNum),w.push("drawStatement( "+trimmedLine+", "+lineNum+" )"),console.log("drawStatement( "+trimmedLine+", "+lineNum+" )")}if(d.length>0){var A=d.length;throw $("#svgOne").remove(),1===A?new Error("in the code provided, "+d.length+" operation is not closed, so your flowchart cannot be drawn correctly."):new Error("in the code provided, "+d.length+" operations are not closed, so your flowchart cannot be drawn correctly.")}endGraph((m.length+1).toString()),w.push("endGraph( "+(m.length+1).toString()+" )"),console.log("FlowChart generation completed"),codePre=$("#ifelse"),svgGroup=$("g");for(var p=0;p<needToTranslate;p++)svgGroup.first().siblings().attr("transform","translate( "+needToTranslate+", 0 )"),svgGroup.first().attr("transform","translate( "+needToTranslate+", 0 )"),$("svg").attr("width",largestX+225)}catch(e){$("#svgContainer").html("<div class='errorMessage'>"+e+"<br><br>Please note that if there are more than one issues with your code, only the first error will be displayed here.</div>"),console.log("There is a problem with the code that you provided:\n "+e),Prism.highlightElement($("#error-message")[0])}}function setAttributes(e,t){for(var n in t)e.setAttributeNS(null,n,t[n])}function wraptorect(e,t,n,i){var r=parseInt(t.getAttribute("x")),o=parseInt(t.getAttribute("y")),a=parseInt(t.getAttribute("width")),d=parseInt(window.getComputedStyle(e)["font-size"]),s=d+i,l=e.cloneNode(!1);l.setAttributeNS(null,"x",r+n),l.setAttributeNS(null,"y",o+n);var c=l.cloneNode(!1);c.setAttributeNS(null,"visibility","hidden");var h=document.createElementNS(null,"tspan"),u=document.createTextNode(e.textContent);h.appendChild(u),c.appendChild(h);for(var m,w=(document.getElementsByTagName("svg")[0].appendChild(c),e.textContent.split(" ")),p=line2="",g=0,f=0;f<w.length;f++)line2=p+w[f]+" ",c.textContent=line2,m=c.getBBox().width,m+2*n>a?(h=document.createElementNS("http://www.w3.org/2000/svg","tspan"),h.setAttributeNS(null,"x",r+n),h.setAttributeNS(null,"dy",s),u=document.createTextNode(p),h.appendChild(u),l.appendChild(h),p=w[f]+" ",g++):p=line2;var h=document.createElementNS("http://www.w3.org/2000/svg","tspan");h.setAttributeNS(null,"x",r+n),h.setAttributeNS(null,"dy",s);var u=document.createTextNode(p);return h.appendChild(u),l.appendChild(h),c.parentNode.removeChild(c),e.parentNode.replaceChild(l,e),g}function startGraph(e,t){var n=!1;if(1!=arguments.length){if(2==arguments.length){n=!0,conditionId=highestId++;var i=new EllipseWithTextObject(t);return i.textVal=e,i.drawEllipseWithText(),previousDrawnElement="start",conditionId}throw new Error("startGraph takes 1 or 2 parameter. You have called this function with "+arguments.length+" parameters which is not a valid signature")}startX=120,startY=20,t=e,e="Start";var i=new EllipseWithTextObject(t);i.textVal=e,i.drawEllipseWithText(),previousDrawnElement="start"}function endGraph(e,t){var n=!1,i=new LineObject("down");i.drawLine();var r=new ArrowObject("down");if(r.drawArrow(),1==arguments.length)t=e,e="End";else{if(2!=arguments.length)throw new Error("endGraph takes 1 or 2 paramenter. You have called this function with "+arguments.length+" parameters which is not a valid signture");n=!0}var o=new EllipseWithTextObject(t);if(o.textVal=e,o.drawEllipseWithText(),$("g:empty").remove(),n){var a=document.createElementNS(svgns,"symbol");setAttributes(a,{id:"symId"+incrementId(),"data-branch":groupNumber,"data-width":largestX,"data-height":largestY,width:largestX,height:largestY});var d=new GroupObject;d.drawGroup(),document.getElementById("svgOne").appendChild(a);var d=new GroupObject;d.drawGroup(),$("#"+d.groupId).appendTo($("#"+a.id)),$("#"+d.groupId).append($("#"+a.id).prevUntil("g:eq(0)").not("symbol")),startX=120,startY=20+2*(unitVertical-20),largestX=constStartX}else{viewBoxVal="0 0 "+parseInt(startY+50)+" "+parseInt(largestX+125),$("svg").attr("height",parseInt(largestY)+100),$("svg").attr("width",parseInt(largestX)+125),needToTranslate>0&&(svgGroup=$("g"),svgGroup.first().siblings().attr("transform","translate( "+needToTranslate+", 0 )"),svgGroup.first().attr("transform","translate( "+needToTranslate+", 0 )"),largestX=parseInt(largestX)+needToTranslate),$("g[data-drawType='function']").attr("transform","translate( "+parseInt(largestX+50)+", 0 )");var s=$("symbol").length;if(0!==s){largestX+=100;for(var l=0;l<s;l++){symId=$("symbol:eq( 0 )").attr("id"),symWidth=parseInt($("symbol:eq( 0 )").attr("data-width"));var c=$("#"+symId).children().first(),h=parseInt(largestX);c.attr("transform","translate( "+h+", -20 )"),c.children().attr("transform","translate( "+h+", -20 )"),largestX+=parseInt(symWidth)+100,$("#"+symId).replaceWith(c.contents())}}$("svg").attr("height",parseInt(largestY)+100),$("svg").attr("width",parseInt(largestX)+150)}$("svg").attr("height",parseInt(largestY)+100),$("svg").attr("width",parseInt(largestX)+150)}function drawConditionSwitch(e,t){return conditionId=highestId++,previousDrawnElement="switch",condition[conditionId]={textForSwitch:e,casesForSwitch:[]},conditionId}function drawConditionDo(e,t){return e=highestId++,condition[e].reconnect=[startX,startY+unitVertical/2],previousDrawnElement="do",e}function drawConditionWhileTrue(e,t,n){var i=new LineObject("down");if(i.drawLine(),0!==furthestWhileY)for(var r=largestY;startY<r+10;){var i=new LineObject("down");i.drawLine()}var o=new ArrowObject("down");o.drawArrow(),conditionId=highestId++;var a=new DiamondWithTextObject(t);a.textVal=e,a.drawDiamondWithText(),groupNumber=branchNumber+1;var d=new GroupObject(t);d.drawGroup();var s=new TextObject("yes");return s.drawText(d.groupId),branchNumber+=1,condition[conditionId]={parentBranch:branchNumber-1,branch1:branchNumber,endBranch1:[startX,startY],branch2:null,endBranch2:[startNoX,startNoY],complete:!1,reconnect:[startX,startY-125]},null!=n&&(condition[conditionId].reconnect=n),previousDrawnElement="whileTrue",conditionId}function drawConditionWhileFalse(e,t){startNoX=condition[e].endBranch2[0],startNoY=condition[e].endBranch2[1],condition[e].endBranch1=[startX,startY],branchNumber++,nbBranches++,condition[e].branch2=branchNumber,groupNumber=branchNumber;var n=new GroupObject(t);n.drawGroup();var i=new TextObject("no");i.drawText(n.groupId,startNoX);var r=new LineObject("right");r.x1=condition[e].endBranch2[0],r.y1=condition[e].endBranch2[1],r.x2=r.x1+3*unitHorizontal+3.5*unitHorizontal*outerLevel,r.y2=r.y1,r.drawLine(),previousDrawnElement="whileFalse"}function drawConditionEndWhileTrue(e,t,n){var i=$("#svgContainer");i.position();condition[e].endBranch1=[startX,startY];var r,o;groupNumber=condition[e].branch1;var a=new GroupObject(n);a.drawGroup(),r=parseInt(condition[e].endBranch1[0]),o=parseInt(condition[e].endBranch1[1]);var d=new LineObject("down");if(d.drawLine(a.groupId),0!=furthestWhileY)for(;startY-20<furthestWhileY;){var d=new LineObject("down");d.drawLine(a.groupId)}startY>furthestWhileY&&(furthestWhileY=startY);var s=new LineObject("left");if(s.drawLine(a.groupId),500==furthestWhileX)for(;startX+120>condition[e].reconnect[0];){var s=new LineObject("left");s.drawLine(a.groupId)}else if(t)for(;startX>furthestWhileX;){var s=new LineObject("left");s.drawLine(a.groupId)}else{var s=new LineObject("left");s.drawLine(a.groupId)}startX<furthestWhileX&&(furthestWhileX=startX,furthestWhileX<furthestX&&(furthestX=furthestWhileX,needToTranslate=70-furthestX));var l=new LineObject("up");l.x1=startX,l.y1=startY,l.x2=startX,l.y2=condition[e].reconnect[1],l.drawLine(a.groupId);var l=new LineObject("right");l.x1=startX,l.y1=condition[e].reconnect[1],l.x2=condition[e].reconnect[0],l.y2=condition[e].reconnect[1],l.drawLine(a.groupId),arrow=new ArrowObject("right"),arrow.drawArrow(a.groupId),nbBranches--,groupNumber=condition[e].parentBranch;var a=new GroupObject(n);a.drawGroup(),condition[e].complete=!0;var c=condition[e].parentBranch;groupNumber=c,previousDrawnElement="endWhileTrue"}function drawConditionIf(e,t){var n=new LineObject("down");n.drawLine();var i=new ArrowObject("down");i.drawArrow(),conditionId=highestId++;var r=new DiamondWithTextObject(t);r.textVal=e,r.drawDiamondWithText(),groupNumber=branchNumber+1;var o=new GroupObject(t);o.drawGroup();var a=new TextObject("yes");return a.drawText(o.groupId),branchNumber+=1,condition[conditionId]={parentBranch:branchNumber-1,branch1:branchNumber,endBranch1:[startX,startY],branch2:null,endBranch2:[startNoX,startNoY],complete:!1},previousDrawnElement="if",conditionId}function drawConditionCaseIf(e,t,n){if(inSwitch<1||"switch"==previousDrawnElement){var i=new LineObject("down");i.drawLine();var r=new ArrowObject("down");r.drawArrow()}else startX+=unitHorizontal,startY-=unitVertical;"fallthrough"!=n&&"multiple"!=n||(conditionIdToConnect=condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch.pop()),conditionId=highestId++,condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch.push(conditionId);var o=new DiamondWithTextObject(t);o.textVal=e,o.drawDiamondWithText(),groupNumber=branchNumber+1;var a=new GroupObject(t);a.drawGroup();var d=new TextObject("yes");if(d.drawText(a.groupId),branchNumber+=1,condition[conditionId]={parentBranch:branchNumber-1,branch1:branchNumber,endBranch1:[startX,startY],branch2:null,endBranch2:[startNoX,startNoY],complete:!1},0!=conditionIdToConnect){var a=new GroupObject(t);a.drawGroup();var s=new LineObject("down");s.x1=condition[conditionIdToConnect].endBranch1[0],s.y1=condition[conditionIdToConnect].endBranch1[1],s.x2=s.x1,"multiple"==n?s.y2=s.y1+unitVertical/2:s.y2=s.y1+unitVertical,s.drawLine(a.groupId),condition[conditionIdToConnect].endBranch1[0]=s.x2,condition[conditionIdToConnect].endBranch1[1]=s.y2;var s=new LineObject("right");s.x1=condition[conditionIdToConnect].endBranch1[0],s.y1=condition[conditionIdToConnect].endBranch1[1],s.x2=(s.x1+condition[conditionId].endBranch1[0])/2,s.y2=s.y1,s.drawLine(a.groupId),condition[conditionIdToConnect].endBranch1[0]=s.x2,condition[conditionIdToConnect].endBranch1[1]=s.y2;var s=new LineObject("up");s.x1=condition[conditionIdToConnect].endBranch1[0],s.y1=condition[conditionIdToConnect].endBranch1[1],s.x2=s.x1,s.y2=condition[conditionId].endBranch1[1]+unitVertical/2,s.drawLine(a.groupId),condition[conditionIdToConnect].endBranch1[0]=s.x2,condition[conditionIdToConnect].endBranch1[1]=s.y2;var s=new LineObject("right");s.x1=condition[conditionIdToConnect].endBranch1[0],s.y1=condition[conditionIdToConnect].endBranch1[1],s.x2=s.y2=condition[conditionId].endBranch1[0],s.y2=s.y1,s.drawLine(a.groupId),standardArrow=new ArrowObject("right"),standardArrow.drawArrow(a.groupId),startY-=unitVertical/2,conditionIdToConnect=0}return previousDrawnElement="caseIf",conditionId}function drawConditionElse(e,t){startNoX=condition[e].endBranch2[0],startNoY=condition[e].endBranch2[1],condition[e].endBranch1=[startX,startY],branchNumber++,nbBranches++,condition[e].branch2=branchNumber,groupNumber=branchNumber;var n=new GroupObject(t);n.drawGroup();var i=new TextObject("no");i.drawText(n.groupId,startNoX);var r=new LineObject("right");r.x1=condition[e].endBranch2[0],r.y1=condition[e].endBranch2[1],r.x2=r.x1+3*unitHorizontal+3.5*unitHorizontal*outerLevel,r.y2=r.y1,r.drawLine(n.groupId),previousDrawnElement="else"}function drawConditionCaseElse(e,t,n){startNoX=condition[e].endBranch2[0],startNoY=condition[e].endBranch2[1],condition[e].endBranch1=[startX,startY],branchNumber++,nbBranches++,condition[e].branch2=branchNumber,groupNumber=branchNumber;var i=new GroupObject(t);i.drawGroup();var r=new TextObject("no");r.drawText(i.groupId,startNoX);var o=new LineObject("right");if(o.x1=condition[e].endBranch2[0],o.y1=condition[e].endBranch2[1],o.x2=o.x1+3*unitHorizontal+3.5*unitHorizontal*outerLevel,o.y2=o.y1,o.drawLine(i.groupId),previousDrawnElement="caseElse",condition[e].endBranch2[0]=startX,condition[e].endBranch2[1]=startY,"fallthrough"===n||"multiple"===n){condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch.pop();var i=new GroupObject(t);i.drawGroup();var o=new LineObject("down");o.x1=condition[e].endBranch1[0],o.y1=condition[e].endBranch1[1],o.x2=o.x1,"multiple"==n?o.y2=o.y1+unitVertical/2:o.y2=o.y1+unitVertical,o.drawLine(i.groupId),condition[e].endBranch1[0]=o.x2,condition[e].endBranch1[1]=o.y2;var o=new LineObject("right");o.x1=condition[e].endBranch1[0],o.y1=condition[e].endBranch1[1],o.x2=(o.x1+condition[e].endBranch2[0])/2,o.y2=o.y1,o.drawLine(i.groupId),condition[e].endBranch1[0]=o.x2,condition[e].endBranch1[1]=o.y2;var o=new LineObject("up");o.x1=condition[e].endBranch1[0],o.y1=condition[e].endBranch1[1],o.x2=o.x1,o.y2=startNoY+unitVertical/2,o.drawLine(i.groupId),condition[e].endBranch1[0]=o.x2,condition[e].endBranch1[1]=o.y2;var o=new LineObject("right");o.x1=condition[e].endBranch1[0],o.y1=condition[e].endBranch1[1],o.x2=o.y2=condition[e].endBranch2[0],o.y2=o.y1,o.drawLine(i.groupId),standardArrow=new ArrowObject("right"),standardArrow.drawArrow(i.groupId),startY-=unitVertical/2,conditionIdToConnect=0,startX=condition[e].endBranch2[0],startY=condition[e].endBranch2[1]}}function drawConditionEndIfElse(e,t){var n=$("#svgContainer");n.position();condition[e].endBranch2=[startX,startY];var i,r;if(condition[e].endBranch1[1]>=condition[e].endBranch2[1]){groupNumber=condition[e].branch1;var o=new GroupObject(t);o.drawGroup(),i=parseInt(condition[e].endBranch1[0]),r=parseInt(condition[e].endBranch1[1]);var a=new LineObject("down");a.x1=condition[e].endBranch1[0],a.y1=condition[e].endBranch1[1],a.x2=a.x1,a.y2=a.y1+unitVertical,a.drawLine(o.groupId),condition[e].endBranch1=[startX,startY];var d=new LineObject("right");d.x1=condition[e].endBranch1[0],d.y1=condition[e].endBranch1[1],d.x2=(condition[e].endBranch2[0]+condition[e].endBranch1[0])/2,d.y2=condition[e].endBranch1[1],d.drawLine(o.groupId),groupNumber=condition[e].branch2;var o=new GroupObject(t);o.drawGroup();var d=new LineObject("down");d.x1=condition[e].endBranch2[0],d.y1=condition[e].endBranch2[1],d.x2=condition[e].endBranch2[0],d.y2=condition[e].endBranch1[1],d.drawLine(o.groupId);var d=new LineObject("left");d.x1=condition[e].endBranch2[0],d.y1=condition[e].endBranch1[1],d.x2=(condition[e].endBranch2[0]+condition[e].endBranch1[0])/2,d.y2=condition[e].endBranch1[1],d.drawLine(o.groupId),startX=d.x2,startY=d.y2}else{groupNumber=condition[e].branch2;var o=new GroupObject(t);o.drawGroup(),i=parseInt(condition[e].endBranch2[0]),r=parseInt(condition[e].endBranch2[1]);var a=new LineObject("down");a.x1=condition[e].endBranch2[0],a.y1=condition[e].endBranch2[1],a.x2=a.x1,a.y2=a.y1+unitVertical,a.drawLine(o.groupId),condition[e].endBranch2=[startX,startY];var d=new LineObject("left");d.x1=condition[e].endBranch2[0],d.y1=condition[e].endBranch2[1],d.x2=(condition[e].endBranch1[0]+condition[e].endBranch2[0])/2,d.y2=condition[e].endBranch2[1],d.drawLine(o.groupId),groupNumber=condition[e].branch1;var o=new GroupObject(t);o.drawGroup();var d=new LineObject("down");d.x1=condition[e].endBranch1[0],d.y1=condition[e].endBranch1[1],d.x2=condition[e].endBranch1[0],d.y2=condition[e].endBranch2[1],d.drawLine(o.groupId);var d=new LineObject("right");d.x1=condition[e].endBranch1[0],d.y1=condition[e].endBranch2[1],d.x2=(condition[e].endBranch1[0]+condition[e].endBranch2[0])/2,d.y2=condition[e].endBranch2[1],d.drawLine(o.groupId),startX=d.x2,startY=d.y2}nbBranches--,groupNumber=condition[e].parentBranch;var o=new GroupObject(t);o.drawGroup(),condition[e].complete=!0;var s=condition[e].parentBranch;groupNumber=s,previousDrawnElement="endIfElse"}function drawConditionEndCaseIfElse(e,t){var n=$("#svgContainer");n.position();condition[e].endBranch2=[startX,startY];if("endCaseIfElse"!=previousDrawnElement){longestInSwitch=0;for(var i=0;i<condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch.length;i++)longestInSwitch<condition[condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch[i]].endBranch1[1]&&(longestInSwitch=condition[condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch[i]].endBranch1[1]),longestInSwitch<condition[condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch[i]].endBranch2[1]&&(longestInSwitch=condition[condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch[i]].endBranch2[1])}var r=(condition[condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch[0]].endBranch1[0]+condition[condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch[condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch.length-1]].endBranch2[0])/2;groupNumber=condition[e].branch1;var o=new GroupObject(t);o.drawGroup();var a=new LineObject("down");a.x1=condition[e].endBranch1[0],a.y1=condition[e].endBranch1[1],a.x2=a.x1,a.y2=longestInSwitch+unitVertical,a.drawLine(o.groupId),condition[e].endBranch1=[startX,startY];var d=new LineObject("right");d.x1=condition[e].endBranch1[0],d.y1=startY,d.x2=r,d.y2=startY,d.drawLine(o.groupId);var a=new LineObject("down");a.x1=condition[e].endBranch2[0],a.y1=condition[e].endBranch2[1],a.x2=a.x1,a.y2=longestInSwitch+unitVertical,a.drawLine(o.groupId);var d=new LineObject("left");d.x1=condition[e].endBranch2[0],d.y1=startY,d.x2=r,d.y2=startY,d.drawLine(o.groupId),nbBranches--,startX=r,startY=longestInSwitch+unitVertical,groupNumber=condition[e].parentBranch;var o=new GroupObject(t);o.drawGroup(),condition[e].complete=!0;var s=condition[e].parentBranch;groupNumber=s,previousDrawnElement="endCaseIfElse"}function drawStatement(e,t){var n=new LineObject("down");if(n.drawLine(),arrow=new ArrowObject("down"),arrow.drawArrow(),"return"===e.substring(0,6)){var i=new EllipseWithTextObject(t);i.textVal=e,i.drawEllipseWithText(),startY+=unitVertical,previousDrawnElement="return"}else{var r=new RectangleWithTextObject(t);r.textVal=e,"continue;"===e&&(r.stroke="red",r.textVal+="             Warning: not drawn correctly as not yet supported"),r.drawRectangleWithText(),previousDrawnElement="break;"===e?"break":"statement"}}function generateFlowChart(e){console.log("Generating FlowChart");var t,n,i,r=new Array,o=0,a=new Array,d=new Array,s=new Array,l=!1,c=new Array,h=new Array,u=(new Array,new Array),m=$("#codeSource").text().split("\n");console.log("Clearing FlowChart"),$("#svgContainer").html("<svg id='svgOne'>Sorry, your browser does not support inline SVG</svg>"),nbBranches=0,branchNumber=0,groupNumber=0,conditionId=1,highestId=1,previousDrawnElement="initial";var w=[];outerLevel=0,startX=120,largestX=startX,startY=20,largestY=startY,unitVertical=50,unitHorizontal=50,startNoX=0,startNoY=0,TextVal="",groupIsComplete=!0,step=0,executeFullOn=!1,furthestWhileX=500,furthestX=500,furthestWhileY=0;m.length+1;startGraph("0"),w.push('startGraph( "0" )');try{for(var p=0;p<m.length;p++)if(trimmedLine=m[p].trim(),trimmedLine=trimmedLine.replace(/ +(?= )/g,""),""==trimmedLine)lineNum=p+1;else if("function"==trimmedLine.substring(0,8)){lineNum=p+1;var g=trimmedLine.indexOf("//");if(g!=-1){var f=trimmedLine.slice(g+2);o=drawStart(f,lineNum),w.push("drawConditionIf( "+o+", "+f+", "+lineNum+" )")}else{var b=trimmedLine.indexOf("("),v=trimmedLine.lastIndexOf(")");if(t=trimmedLine.indexOf("{"),b==-1||v==-1)throw new Error("your if statement at line "+lineNum+" requires the parameter to be surrounded by parentheses: <br><br>function myFunctionName( param1, param2 ) or function myFunctionName() {<br>&nbsp;&nbsp;&nbsp;&nbsp; statements;<br> }");o=startGraph(trimmedLine.slice(9,t),lineNum),w.push("startGraph( "+o+", "+trimmedLine.slice(9,t)+", "+lineNum+" )")}console.log("startGraph( "+o+", "+trimmedLine.slice(9,t)+", "+lineNum+" );"),d.push(o),r[o]="function"}else if("if"==trimmedLine.substring(0,2)){lineNum=p+1;var g=trimmedLine.indexOf("//");if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionIf(f,lineNum),w.push("drawConditionIf( "+o+", "+f+", "+lineNum+" )")}else{if(t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),t==-1||n==-1)throw new Error("your if statement at line "+lineNum+" requires the condition to be surrounded by parentheses: <br><br>if (condition) {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement1;<br>} else {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement2;<br> }");
o=drawConditionIf(trimmedLine.slice(t+1,n),lineNum),w.push("drawConditionIf( "+o+", "+trimmedLine.slice(t+1,n)+", "+lineNum+" )")}if(console.log("drawConditionIf( "+o+", "+trimmedLine+", "+lineNum+" );"),d.push(o),r[o]="if",s[o]=!1,a[o]=1,trimmedLine.indexOf("{")==-1){if("{"!=m[p+1].trim().substring(0,1))throw new Error("your if statement at line "+lineNum+' requires statements to be surrounded by curly braces: <pre class="language-javascript"><code id="error-message">if (condition) {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement1;<br>} else {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement2;<br>}</code></pre>');p++}}else if("switch"==trimmedLine.substring(0,6))inSwitch+=1,lineNum=p+1,t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),o=drawConditionSwitch(trimmedLine.slice(t+1,n),lineNum),w.push("drawConditionSwitch( "+trimmedLine.slice(t+1,n)+", "+lineNum+" )"),console.log("drawConditionSwitch( "+trimmedLine.slice(t+1,n)+", "+lineNum+" );"),conditionSwitch.push(o),d.push(o),r[o]="switch";else if("case"==trimmedLine.substring(0,4))if("switch"!=previousDrawnElement){u[conditionSwitch[conditionSwitch.length-1]]+=1;for(var C=w.length,I=C;I>0;I--)if("drawConditionEndIfElse"==w[I-1].substring(0,22)){t=w[I-1].indexOf("("),n=w[I-1].lastIndexOf(")");var x=w[I-1].slice(t+1,n).split(","),y=x[0];o-1<y&&(outerLevel+=1,console.log("In case and found "+w[I-1].substring(0,22)+"operationNum - 1 < innerOp so outerLevel + 1 -> outerLevel = "+outerLevel)),o-=1}else if("drawConditionIf"==w[I-1].substring(0,15)){t=w[I-1].indexOf("("),n=w[I-1].lastIndexOf(")");var x=w[I-1].slice(t+1,n).split(","),N=x[0];if(N<=o)break}lineNum=p+1;var i=d.pop();if(o=i,"break"===previousDrawnElement||"break"!==previousDrawnElement&&"swift"===e?condition[o].hasBreak=!0:(condition[o].hasBreak=!1,"caseIf"===previousDrawnElement?condition[o].fallthrough="multiple":condition[o].fallthrough="fallthrough"),void 0==o)throw new Error("you are trying to close an operation at line "+(lineNum+1)+" that is either not opened or already closed, so your flowchart cannot be drawn correctly.");drawConditionCaseElse(o),w.push("drawConditionCaseElse( "+o+" )"),console.log("drawConditionCaseElse( "+o+" )"),outerLevel=0,console.log("resetting outerLevel after ending if else so outerLevel = "+outerLevel);var g=trimmedLine.indexOf("//");if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionCaseIf(f,lineNum),w.push("drawConditionCaseIf( "+f+", "+lineNum+" )")}else{t=5,n=trimmedLine.lastIndexOf(":");var L=condition[conditionSwitch[conditionSwitch.length-1]].textForSwitch;o=condition[o].hasBreak?drawConditionCaseIf(L+"="+trimmedLine.slice(t,n),lineNum):drawConditionCaseIf(L+"="+trimmedLine.slice(t,n),lineNum,condition[o].fallthrough),w.push("drawConditionCaseIf( "+L+"="+trimmedLine.slice(t,n)+", "+lineNum+" )")}s[o]=!0,d.push(o),r[o]="caseIf",s[o]=!1,console.log("drawConditionCaseIf( "+o+" "+trimmedLine+", "+lineNum+" );")}else{u[conditionSwitch[conditionSwitch.length-1]]=1,lineNum=p+1;var g=trimmedLine.indexOf("//");if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionCaseIf(f,lineNum),w.push("drawConditionCaseIf( "+f+", "+lineNum+" )")}else{t=5,n=trimmedLine.lastIndexOf(":");var L=condition[conditionSwitch[conditionSwitch.length-1]].textForSwitch;o=drawConditionCaseIf(L+"="+trimmedLine.slice(t,n),lineNum),w.push("drawConditionCaseIf( "+L+"="+trimmedLine.slice(t,n)+", "+lineNum+" )")}console.log("drawConditionCaseIf( "+o+" "+L+"="+trimmedLine.slice(t,n)+", "+lineNum+" )"),d.push(o),r[o]="caseIf",s[o]=!1,u[conditionSwitch[conditionSwitch.length-1]]+=1}else if("default"==trimmedLine.substring(0,7)){for(var C=w.length,E=C;E>0;E--)if("drawConditionEndIfElse"==w[E-1].substring(0,22)){t=w[E-1].indexOf("("),n=w[E-1].lastIndexOf(")");var x=w[E-1].slice(t+1,n).split(","),y=x[0];o-1<y&&(outerLevel+=1,console.log("In default and found "+w[E-1].substring(0,22)+" so outerLevel + 1 -> outerLevel = "+outerLevel))}else if("drawConditionIf"==w[E-1].substring(0,15)){t=w[E-1].indexOf("("),n=w[E-1].lastIndexOf(")");var x=w[E-1].slice(t+1,n).split(","),N=x[0]}lineNum=p+1,"break"===previousDrawnElement?condition[o].hasBreak=!0:(condition[o].hasBreak=!1,"caseIf"===previousDrawnElement?condition[o].fallthrough="multiple":condition[o].fallthrough="fallthrough"),condition[o].hasBreak?drawConditionCaseElse(o,lineNum):drawConditionCaseElse(o,lineNum,condition[o].fallthrough),w.push("drawConditionCaseElse( "+o+" )"),console.log("drawConditionCaseElse( "+o+" );"),outerLevel=0,console.log("resetting outerLevel after ending case else so outerLevel = "+outerLevel),s[o]=!0}else if("while"==trimmedLine.substring(0,5)){lineNum=p+1;for(var B=!1,g=trimmedLine.indexOf("//"),C=w.length,S=d.length;S>0;S--)"drawConditionWhileTrue"==r[d[S-1]]&&(B=!0);if(B||(furthestWhileX=500),g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionWhileTrue(f,lineNum),w.push("drawConditionWhileTrue( "+o+", "+f+", "+lineNum+" )")}else t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),o=drawConditionWhileTrue(trimmedLine.slice(t+1,n),lineNum),w.push("drawConditionWhileTrue( "+o+", "+trimmedLine.slice(t+1,n)+", "+lineNum+" )");console.log("drawConditionWhileTrue( "+o+", "+trimmedLine+", "+lineNum+" );"),d.push(o),r[o]="while"}else if("for"==trimmedLine.substring(0,3)){lineNum=p+1;for(var g=trimmedLine.indexOf("//"),C=w.length,S=d.length;S>0;S--)"drawConditionWhileTrue"==r[d[S-1]]&&(B=!0);if(furthestWhileX=B?furthestX:500,t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),t==-1||n==-1)throw new Error("your for loop at line "+lineNum+" requires parentheses, see for example:<br><br>for (var i = 0; i < 9; i++) { <br>&nbsp;&nbsp;&nbsp;&nbsp;console.log(i);<br>&nbsp;&nbsp;&nbsp;&nbsp;// more statements<br>}");var O=trimmedLine.slice(t+1,n),T=O.split(";");drawStatement(T[0],lineNum),w.push("drawStatement( "+T[0]+", "+lineNum+" )"),console.log("drawStatement( "+T[0]+", "+lineNum+" )"),o=drawConditionWhileTrue(T[1],lineNum),w.push("drawConditionWhileTrue( "+o+", "+T[1]+", "+lineNum+" )"),console.log("drawConditionWhileTrue( "+o+", "+T[1]+", "+lineNum+" );"),d.push(o),r[o]="for",h[o]=lineNum,c[o]=T[2]}else if("} else {"==trimmedLine.substring(0,8)){for(var C=w.length,W=0,E=C;E>0;E--)if("drawConditionEndIfElse"==w[E-1].substring(0,22)||"drawConditionWhileFalse"==w[E-1].substring(0,23)||"drawConditionCaseElse"==w[E-1].substring(0,21)){t=w[E-1].indexOf("("),n=w[E-1].lastIndexOf(")");var x=w[E-1].slice(t+1,n).split(","),y=x[0];o-1<y&&(outerLevel+=1,console.log("in else and found "+w[E-1].substring(0,22)+" and operationNum -1 < innerOp so in else and found drawConditionEndIfElse so outerLevel + 1 -> outerLevel = "+outerLevel))}else if("drawConditionIf"==w[E-1].substring(0,15)){t=w[E-1].indexOf("("),n=w[E-1].lastIndexOf(")");var x=w[E-1].slice(t+1,n).split(","),N=x[0];if(N<=o)break}lineNum=p+1,drawConditionElse(o),w.push("drawConditionElse( "+o+" )"),console.log("drawConditionElse( "+o+" );"),s[o]=!0}else if("} else if"==trimmedLine.substring(0,9)){for(var C=w.length,W=0,I=C;I>0;I--)if("drawConditionEndIfElse"==w[I-1].substring(0,22)){t=w[I-1].indexOf("("),n=w[I-1].lastIndexOf(")");var x=w[I-1].slice(t+1,n).split(","),y=x[0];o-1<y&&(W=y,outerLevel+=1,console.log("in else if and found "+w[I-1].substring(0,22)+" operationNum - 1 < innerOp so outerLevel + 1 -> outerLevel = "+outerLevel)),o-=1}else if("drawConditionIf"==w[I-1].substring(0,15)){t=w[I-1].indexOf("("),n=w[I-1].lastIndexOf(")");var x=w[I-1].slice(t+1,n).split(","),N=x[0];if(N<=o)break}lineNum=p+1,drawConditionElse(o),w.push("drawConditionElse( "+o+" )");var g=trimmedLine.indexOf("//");if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionIf(f,lineNum),w.push("drawConditionIf( "+o+", "+f+", "+lineNum+" )")}else{if(t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),t==-1||n==-1)throw new Error("your if statement at line "+lineNum+" requires the condition to be surrounded by parentheses: <br><br>if (condition) {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement1;<br>} else {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement2;<br> }");o=drawConditionIf(trimmedLine.slice(t+1,n),lineNum),w.push("drawConditionIf( "+o+", "+trimmedLine.slice(t+1,n)+", "+lineNum+" )")}if(outerLevel=0,s[o]=!0,d.push(o),a[o]=a[d[d.length-2]]+1,r[o]="if",s[o]=!1,console.log("drawConditionIf( "+o+", "+trimmedLine+", "+lineNum+" );"),trimmedLine.indexOf("{")==-1){if("{"!=m[p+1].trim().substring(0,1))throw new Error("your if statement at line "+lineNum+" requires statements to be surrounded by curly braces: <br><br>if (condition1) {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement1;<br>} else if (condition2) {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement2;<br> } else {<br>&nbsp;&nbsp;&nbsp;&nbsp; statement3;<br> }");p++}}else if("do {"==trimmedLine.substring(0,4)||"do"==trimmedLine.substring(0,2)&&"{"==m[p+1])lineNum=p+1,o=drawConditionDo(o,lineNum),w.push("drawConditionDo( operationNum, lineNum )"),console.log("drawConditionDo( "+o+", "+lineNum+" );"),d.push(o),r[o]="do";else if("}"==trimmedLine.substring(0,1)){var i=d.pop();if(o=i,void 0==o)throw new Error("you are trying to close an operation at line "+(lineNum+1)+" that is either not opened or already closed, so your flowchart cannot be drawn correctly.");if(lineNum=p+1,"function"==r[o])endGraph("End function",lineNum),w.push("endGraph( "+(m.length+1).toString()+" )"),console.log("function flowchart generation completed"),o-=1;else if("if"==r[o]){for(var f=trimmedLine.slice(g+2),C=w.length,I=C;I>0;I--)if("drawConditionEndIfElse"==w[I-1].substring(0,22)||"drawConditionWhileFalse"==w[I-1].substring(0,23)||"drawConditionCaseElse"==w[I-1].substring(0,21)){t=w[I-1].indexOf("("),n=w[I-1].lastIndexOf(")");var x=w[I-1].slice(t+1,n).split(","),y=x[0];o-1<y&&(outerLevel+=1,console.log("in if and found "+w[I-1].substring(0,22)+" so outerLevel + 1 -> outerLevel = "+outerLevel))}else if("drawConditionIf"==w[I-1].substring(0,15)){t=w[I-1].indexOf("("),n=w[I-1].lastIndexOf(")");var x=w[I-1].slice(t+1,n).split(","),N=x[0]}for(var A=0;A<w.length;A++){var X=w[A],j=w[A].split(" ");"drawConditionElse("!=X.substring(0,18)||j[1]!=i&&j[1]!=i+","||(l=!0)}for(0==l?(drawConditionElse(o,lineNum),w.push("drawConditionElse( "+o+", "+lineNum+" )"),console.log("drawConditionElse( "+o+", "+lineNum+" )")):l=!1,drawConditionEndIfElse(o,lineNum),outerLevel=0,console.log("resetting outerLevel after ending if else so outerLevel = "+outerLevel),w.push("drawConditionEndIfElse( "+o+", "+lineNum+" )"),console.log("drawConditionEndIfElse( "+o+", "+lineNum+" )");a[o]>1;){var i=d.pop();if(o=i,void 0==o)throw new Error("you are trying to close an operation at line "+(lineNum+1)+" that is either not opened or already closed, so your flowchart cannot be drawn correctly.");drawConditionEndIfElse(o,lineNum),w.push("drawConditionEndIfElse( "+o+", "+lineNum+" )"),console.log("drawConditionEndIfElse( "+o+", "+lineNum+" )")}}else if("do"==r[o]){if(trimmedLine.indexOf("while")!=-1){lineNum=p+1;var g=trimmedLine.indexOf("//"),C=w.length;if(g!=-1){var f=trimmedLine.slice(g+2);o=drawConditionWhileTrue(f,lineNum,condition[o].reconnect),w.push("drawConditionWhileTrue( "+o+", "+f+", "+lineNum+" )")}else t=trimmedLine.indexOf("("),n=trimmedLine.lastIndexOf(")"),o=drawConditionWhileTrue(trimmedLine.slice(t+1,n),lineNum,condition[o].reconnect),w.push("drawConditionWhileTrue( "+o+", "+trimmedLine.slice(t+1,n)+", "+lineNum+", "+condition[o].reconnect+" )");console.log("drawConditionWhileTrue( "+o+", "+trimmedLine+", "+lineNum+" );");for(var C=w.length,Y=C;Y>0;Y--)if("drawConditionEndIfElse"==w[Y-1].substring(0,22)||"drawConditionWhileFalse"==w[Y-1].substring(0,23)||"drawConditionCaseElse"==w[Y-1].substring(0,21)){t=w[Y-1].indexOf("("),n=w[Y-1].lastIndexOf(")");var x=w[Y-1].slice(t+1,n).split(","),y=x[0];o-1<y&&(outerLevel+=1,console.log("In do and found "+w[Y-1].substring(0,22)+" so outerLevel + 1 -> outerLevel = "+outerLevel))}var f=trimmedLine.slice(g+2);drawConditionEndWhileTrue(o,lineNum),w.push("drawConditionEndWhileTrue( "+o+", "+lineNum+" )"),console.log("drawConditionEndWhileTrue( "+o+", "+lineNum+" )"),outerLevel=0,console.log("resetting outerLevel after ending while true so outerLevel = "+outerLevel),drawConditionWhileFalse(o,lineNum),w.push("drawConditionWhileFalse( "+o+", "+lineNum+" )"),console.log("drawConditionWhileFalse( "+i+", "+lineNum+" )")}}else if("while"==r[o]){for(var C=w.length,Y=C;Y>0;Y--)if("drawConditionEndIfElse"==w[Y-1].substring(0,22)||"drawConditionWhileFalse"==w[Y-1].substring(0,23)||"drawConditionCaseElse"==w[Y-1].substring(0,21)){t=w[Y-1].indexOf("("),n=w[Y-1].lastIndexOf(")");var x=w[Y-1].slice(t+1,n).split(","),y=x[0];o-1<y&&(outerLevel+=1,console.log("in while and found "+w[Y-1].substring(0,22)+" operationNum - 1 < innerOp so outerLevel + 1 -> outerLevel = "+outerLevel),furthestWhileX=furthestX)}else if("drawConditionIf"==w[Y-1].substring(0,15)){t=w[Y-1].indexOf("("),n=w[Y-1].lastIndexOf(")");var x=w[Y-1].slice(t+1,n).split(","),N=x[0]}var f=trimmedLine.slice(g+2);drawConditionEndWhileTrue(o,lineNum),w.push("drawConditionEndWhileTrue( "+o+", "+lineNum+" )"),console.log("drawConditionEndWhileTrue( "+o+", "+lineNum+" )"),drawConditionWhileFalse(o,lineNum),w.push("drawConditionWhileFalse( "+o+", "+lineNum+" )"),console.log("drawConditionWhileFalse( "+i+", "+lineNum+" )"),outerLevel=0,console.log("resetting outerLevel after end while false so outerLevel = "+outerLevel)}else if("caseIf"==r[o]){for(var f=trimmedLine.slice(g+2),C=w.length,I=C;I>0;I--)if("drawConditionEndIfElse"==w[I-1].substring(0,22)||"drawConditionWhileFalse"==w[I-1].substring(0,23)||"drawConditionCaseElse"==w[I-1].substring(0,21)){t=w[I-1].indexOf("("),n=w[I-1].lastIndexOf(")");var x=w[I-1].slice(t+1,n).split(","),y=x[0];o-1<y&&(outerLevel+=1,console.log("in case if and found "+w[I-1].substring(0,22)+" where operationNum - 1 < innerOp so outerLevel + 1 -> outerLevel = "+outerLevel))}else if("drawConditionIf"==w[I-1].substring(0,15))break;0==s[o]&&(drawConditionCaseElse(o,lineNum),w.push("drawConditionCaseElse( "+o+", "+lineNum+" )"),console.log("drawConditionCaseElse( "+o+", "+lineNum+" )"),outerLevel=0,console.log("resetting outerLevel after ending if else so outerLevel = "+outerLevel));for(var k=condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch,F=k.length-1;F>=0;F--)drawConditionEndCaseIfElse(k[F],lineNum),w.push("drawConditionEndCaseIfElse( "+k[F]+", "+lineNum+" )"),console.log("drawConditionEndCaseIfElse( "+k[F]+", "+lineNum+" )"),outerLevel=0,console.log("resetting outerLevel after ending case if else so outerLevel = "+outerLevel);o=d.pop(),o-=1}else if("switch"==r[o]){for(var k=condition[conditionSwitch[conditionSwitch.length-1]].casesForSwitch,G=k.length-1;G>=0;G--){var i=d.pop();o=i,conditionSwitch.pop()}inSwitch-=1;var i=d.pop();o=i,o-=1}else if("for"==r[o]){for(var C=w.length,V=C;V>0;V--)if("drawConditionEndIfElse"==w[V-1].substring(0,22)||"drawConditionWhileFalse"==w[V-1].substring(0,23)||"drawConditionCaseElse"==w[V-1].substring(0,21)){t=w[V-1].indexOf("("),n=w[V-1].lastIndexOf(")");var x=w[V-1].slice(t+1,n).split(","),y=x[0];o-1<y&&(outerLevel+=1,furthestWhileX=furthestX,console.log("in for and found "+w[V-1].substring(0,22)+" operationNum - 1 < innerOp so outerLevel + 1 -> outerLevel = "+outerLevel))}else if("drawConditionIf"==w[V-1].substring(0,15)){t=w[V-1].indexOf("("),n=w[V-1].lastIndexOf(")");var x=w[V-1].slice(t+1,n).split(","),N=x[0]}var B=!0;drawStatement(c[o],h[o]),w.push("drawStatement( "+c[o]+", "+h[o]+" )"),console.log("drawStatement( "+c[o]+", "+h[o]+" )"),drawConditionEndWhileTrue(o,B,lineNum),w.push("drawConditionEndWhileTrue( "+o+", "+B+", "+lineNum+" )"),console.log("drawConditionEndWhileTrue( "+o+", "+B+", "+lineNum+" )"),drawConditionWhileFalse(o,lineNum),w.push("drawConditionWhileFalse( "+o+", "+lineNum+" )"),console.log("drawConditionWhileFalse( "+i+", "+lineNum+" )"),outerLevel=0,console.log("resetting outerLevel after ending while false in for loop so outerLevel = "+outerLevel)}}else{lineNum=p+1;var g=trimmedLine.indexOf("//");if(g!=-1){var f=trimmedLine.slice(g+2);drawStatement(f,lineNum),w.push("drawStatement( "+f+", "+lineNum+" )"),console.log("drawStatement( "+f+", "+lineNum+" )")}else drawStatement(trimmedLine,lineNum),w.push("drawStatement( "+trimmedLine+", "+lineNum+" )"),console.log("drawStatement( "+trimmedLine+", "+lineNum+" )");notSupported=!1}if(d.length>0){var D=d.length;throw $("#svgOne").remove(),1===D?new Error("in the code provided, "+d.length+" operation is not closed, so your flowchart cannot be drawn correctly."):new Error("in the code provided, "+d.length+" operations are not closed, so your flowchart cannot be drawn correctly.")}endGraph((m.length+1).toString()),w.push("endGraph( "+(m.length+1).toString()+" )"),console.log("FlowChart generation completed"),codePre=$("#ifelse"),svgGroup=$("g")}catch(e){$("#svgContainer").html("<div class='errorMessage'>"+e+"<br><br>Please note that if there are more than one issues with your code, only the first error will be displayed here.</div>"),console.log("There is a problem with the code that you provided:\n "+e)}}function drawArray(e,t,n,i){if(codeLineTest!=n)if(0==codeLineTest)codeLineTest=n;else{var r=new LineObject("horizontalSeparator");r.strokeWidth=1,r.drawLine(),codeLineTest=n}innerGroup=!1;var o=new Array;new Array;startY+=100;var a=new GroupObject(n);a.drawGroup();var d=new TextObject(t);d.drawText(a.groupId,startX-100,startY+30);var s=$("#"+a.groupId)[0].getBBox();s.width>80&&(startX=s.width+40);var l=new GroupObject(n);if(l.drawGroup(a.groupId),0==e.length){var c=new LineObject("down");c.drawLine(l.groupId),startY-=50}else if(void 0==e.length){if("object"==typeof e)for(var h in e)if(i===!0)if(void 0==e[h].length){groupNumber=highestBranchNumber++;var u=new GroupObject(n);u.drawGroup(l.groupId);var m=new arrayCellWithTextObject(h,e[h],!0),w=e[h];Array.isArray(w)&&(w="["+w+"]"),m.textVal=h+": "+w,m.drawArrayCellWithText(u.groupId),o.push([e[h],t+"."+h,n,i,groupNumber,m.x,m.y,m.width])}else if(Array.isArray(e[h])){groupNumber=highestBranchNumber++;var u=new GroupObject(n);u.drawGroup(l.groupId);var m=new arrayCellWithTextObject(h,e[h],!0),w=e[h];Array.isArray(w)&&(w="["+w+"]"),m.textVal=h+": "+w,m.drawArrayCellWithText(u.groupId),o.push([e[h],t+"."+h,n,i,groupNumber,m.x,m.y,m.width])}else{var m=new arrayCellWithTextObject(h,e[h],!0),w=e[h];Array.isArray(w)&&(w="["+w+"]"),m.textVal=h+": "+w,m.drawArrayCellWithText()}else{var m=new arrayCellWithTextObject(h,e[h],!0),w=e[h];Array.isArray(w)&&(w="["+w+"]"),m.textVal=h+": "+w,m.drawArrayCellWithText()}}else for(var p=0;p<e.length;p++)if(Array.isArray(e[p]))if(i===!0){groupNumber=highestBranchNumber++;var u=new GroupObject(n);u.drawGroup(l.groupId);var m=new arrayCellWithTextObject(p,e[p]);m.textVal="["+e[p]+"]",m.drawArrayCellWithText(u.groupId),o.push([e[p],t+"["+p+"]",n,i,groupNumber,m.x,m.y,m.width])}else{var m=new arrayCellWithTextObject(p,e[p]);m.textVal="["+e[p]+"]",m.drawArrayCellWithText()}else if("[object Object]"==Object.prototype.toString.call(e[p])){groupNumber=highestBranchNumber++;var u=new GroupObject(n);u.drawGroup(l.groupId);var m=new arrayCellWithTextObject(p,e[p]);m.textVal=e[p],m.drawArrayCellWithText(u.groupId),o.push([e[p],t+"["+p+"]",n,i,groupNumber,m.x,m.y,m.width])}else{var m=new arrayCellWithTextObject(p,e[p]);m.textVal=e[p],m.drawArrayCellWithText()}startX=120;var g=new Array;g[f]=new Array;for(var f=0;f<o.length;f++){g=o[f],groupNumber=g[4];var b=drawArray(g[0],g[1],g[2],g[3]),v=$("#"+b)[0].getBBox(),C=$("g[data-branch='"+$("#"+b).attr("data-branch")+"']:first").children("rect:first"),I=new ExpansionObject(C.attr("x"),parseInt(C.attr("y"))+parseInt(C.attr("height")),C.attr("width"),v.x,v.y,v.width,$(b).attr("data-branch"),b);I.drawExpansion()}return l.groupId}function generateArrayChart(e){new Array,new Array;console.log("Generating ArrayChart");var t=$("#codeSource").text().split("\n");console.log("Clearing ArrayChart"),$("#svgContainer").html("<svg id='svgOne'>Sorry, your browser does not support inline SVG</svg>"),nbBranches=0;var n=0;branchNumber=0,groupNumber=0,highestId=1,startX=120,largestX=startX,startY=20,largestY=startY,unitVertical=50,unitHorizontal=50,startNoX=0,startNoY=0,TextVal="",groupIsComplete=!0,step=0,maxLine=16,executeFullOn=!1,furthestWhileX=500,furthestWhileY=0;var i="";null!=document.getElementById("sandboxScript")&&$("sandboxScript").remove(this),js=document.createElement("script"),js.id="sandboxScript";for(var r=0;r<t.length;r++){if(trimmedLine=t[r].trim(),""==trimmedLine)n=r+1;else if(trimmedLine.indexOf("new Array")!=-1){if(n=r+1,startCut=trimmedLine.indexOf(" "),endCut=trimmedLine.indexOf("="),startCut==-1||endCut==-1)throw new Error("there seems to be a problem with your array declaration at line "+n)}else if(trimmedLine.indexOf("drawArray")!=-1){n=r+1,startCut=trimmedLine.indexOf("("),endCut=trimmedLine.indexOf(")");var o=trimmedLine.slice(startCut+1,endCut).split(",");o.length>1?trimmedLine=trimmedLine.slice(0,startCut)+"( "+o[0]+', "'+o[0]+'", '+n+", "+o[1]+" );":trimmedLine=trimmedLine.slice(0,endCut)+', "'+trimmedLine.slice(startCut+1,endCut)+'", '+n+" );"}i+=trimmedLine}js.innerHTML=i,document.body.appendChild(js),console.log("ArrayChart generation completed")}$(document).ready(function(){function e(e){$("g[data-line='"+e+"']").attr("class","hovered"),e<=0||e>=editor.lastLine()+2||null==e?($("div.CodeMirror-activeline").removeClass("CodeMirror-activeline"),$("div.CodeMirror-activeline-background").removeClass("CodeMirror-activeline-background")):($(this).attr("class","hovered"),editor.setCursor(parseInt(e-1),0))}function t(){if($("#controlPanel").addClass("running"),$("#svgOne").attr("pointer-events","none"),$("#ifelse").attr("pointer-events","none"),$("g").attr("class",""),0==r?($("#inputAge").text(""),$("#inputEntry").text(""),n=null,i=null,document.getElementById("ageGiven").innerHTML="",document.getElementById("entryResults").innerHTML="",$("#svgContainer").animate({scrollTop:$("g[data-line='0']").offset().top},500),e(0)):1==r?($("#inputAge").text(n),$("#inputEntry").text(i),e(1)):2==r?(n=parseInt(prompt("What is your age?")),$("#inputAge").text(n),$("#svgContainer").animate({scrollTop:$("g[data-line='3']").offset().top},500),e(3)):3==r?(document.getElementById("ageGiven").innerHTML=n,e(5)):4==r?e(7):5==r?n<=12?$("#groupId21").addClass("true"):$("#groupId21").addClass("false"):6==r?n<=12?(i="free",document.getElementById("entryResults").innerHTML=i,$("#inputEntry").text(i),$("#svgContainer").animate({scrollTop:$("g[data-line='8']").offset().top},500),e(8)):($("#svgContainer").animate({scrollTop:$("g[data-line='9']").offset().top},500),e(9)):7==r?n<=12?($("#groupId68").attr("class","hovered"),editor.setCursor(parseInt(12),0),r=9):n<=16?$("#groupId38").addClass("true"):($("#svgContainer").animate({scrollTop:$("#groupId38").offset().top},500),$("#groupId38").addClass("false")):8==r?n<=16?(i="10",$("#groupId46").attr("class","hovered"),$("#ifelse").attr("data-line","10"),document.getElementById("entryResults").innerHTML=i,$("#inputEntry").text(i)):(i="20",document.getElementById("entryResults").innerHTML=i,$("#inputEntry").text(i),e(12)):9==r?($("#svgContainer").animate({scrollTop:$("g[data-line='13']").offset().top},500),n<=16?($("#groupId58").attr("class","hovered"),$("#groupId65").attr("class","hovered"),$("#ifelse").attr("data-line","13")):($("#groupId61").attr("class","hovered"),$("#groupId65").attr("class","hovered"),$("#ifelse").attr("data-line","13"))):10==r?e(15):11==r&&(e(16),$("#svgOne").attr("pointer-events","auto"),$("#ifelse").attr("pointer-events","auto"),$("#controlPanel").removeClass("running"),r=-1),r+=1,o)if(r>0&&r<=11)var a=setTimeout(function(){t()},1e3);else clearTimeout(a)}var n,i,r=0,o=!1;$("#sourceCode").offset().top,$("#ifelse"),$("g");$(document).on("mouseenter","g",function(){$("g").attr("class","");var e=$(this).attr("data-line");e<=0||e>=editor.lastLine()+2||null==e?($("div.CodeMirror-activeline").removeClass("CodeMirror-activeline"),$("div.CodeMirror-activeline-background").removeClass("CodeMirror-activeline-background")):($(this).attr("class","hovered"),editor.setCursor(parseInt(e-1),0))}),$(document).on("mousedown","g",function(){$("g").attr("class","");var e=$(this).attr("data-line");e<=0||e>=editor.lastLine()+2||null==e?($("div.CodeMirror-activeline").removeClass("CodeMirror-activeline"),$("div.CodeMirror-activeline-background").removeClass("CodeMirror-activeline-background")):($(this).attr("class","hovered"),editor.setCursor(parseInt(e-1),0))}),$(document).on("mousedown","#sourceCode",function(e){if("none"!=$("#ifelse").attr("pointer-events")){$("g").attr("class","");var t=editor.getCursor();lineNum=t.line+1,lineNum>=0&&lineNum<=editor.lastLine()+1&&$("g[data-line='"+lineNum+"']").attr("class","hovered")}}),$(document).on("click","#executeFull",function(){o=!0,t()}),$(document).on("click","#execute",function(){o=!1,t()})}),$(document).ready(function(){$("#saveCode").click(function(){$("#controlPanel").hide(),editor.save();var e=$("#codeSource").val();$("#codeSource").html(e),$("#codeStatus").text("saving... *"),$("#codeStatus").animate({opacity:0},1e3).queue("steps",[function(e){var t=editor.getOption("mode"),n=$("meta[ name='description']").attr("content");"Array Visualisation Tool"===n?generateArrayChart(t):generateFlowChart(t),e()}]).dequeue("steps"),addPanZoom("#svgOne")}),editor.on("change",function(e,t){"*"!==$("#codeStatus").text()&&$("#codeStatus").animate({opacity:0},function(){$("#codeStatus").text("*").animate({opacity:1},300)})})});var groupNumber=0,needToTranslate=0,branchNumber=0,innerGroup=!1,highestBranchNumber=1,expansionArray=new Array,allArrays=new Array,arrayCellWithTextObject=function(e,t){var n=!1;void 0==t&&(t=""),this.height=50,this.width=100,this.x=startX,this.y=startY,this.stroke=defaultTroke,this.fill=emptyFill,this.strokeWidth=defaultStrokeWidth,this.textId="textId"+incrementId(),this.textIndexId="textIndexId"+incrementId(),this.shapeId="shape"+incrementId(),this.shapeIndexId="shapeIndex"+incrementId(),this.fillText="#000",this.textSize=defaultTextSize,this.fontFamily=defaultFontFamily,this.textVal=t,this.textIndex=e,this.drawArrayCellWithText=function(e){var t=document.createElementNS(svgns,"rect");setAttributes(t,{id:this.shapeId,x:this.x,y:this.y,height:this.height,width:this.width,stroke:this.stroke,fill:this.fill,"stroke-width":this.strokeWidth}),null!=e?($("g").last().append(t),n=!0,innerGroup=!0):innerGroup?$("g").last().parent().append(t):($("g").last().append(t),n=!1);var i=document.createElementNS(svgns,"text");setAttributes(i,{id:this.textId,fill:this.fillText,"font-size":this.textSize,"font-family":this.fontFamily}),n?$("g").last().append(i):$("rect").last().parent().append(i),document.getElementById(this.textId).textContent=this.textVal;for(var r=i.getBBox();r.width>=this.width-20;){document.getElementById(this.shapeId);this.width=this.width+50;var o=document.getElementById(this.shapeId).parentNode;o.removeChild(t);var t=document.createElementNS(svgns,"rect");setAttributes(t,{id:this.shapeId,x:this.x,y:this.y,height:this.height,width:this.width,stroke:this.stroke,fill:this.fill,"stroke-width":this.strokeWidth}),n?$("g").last().append(t):$("rect").last().parent().append(t)}setAttributes(i,{x:this.x+(this.width-r.width)/2,y:this.y+this.height-1.25*r.height});var a=document.createElementNS(svgns,"rect");setAttributes(a,{id:this.shapeIndexId,x:this.x,y:this.y,height:17,width:24,stroke:this.stroke,fill:this.fill,"stroke-width":this.strokeWidth}),n?$("g").last().append(a):$("rect").last().parent().append(a);var d=document.createElementNS(svgns,"text");setAttributes(d,{id:this.textIndexId,fill:this.fillText,"font-size":this.textSize,"font-family":this.fontFamily}),n?$("g").last().append(d):$("rect").last().parent().append(d),document.getElementById(this.textIndexId).textContent=this.textIndex;var s=d.getBBox();setAttributes(d,{x:this.x+(24-s.width)/2,y:this.y+33-1.25*s.height}),startX+=this.width,largestX<=startX&&(largestX=startX),largestY<=startY&&(largestY=startY),largestY<=308&&(largestY=308),$("svg").attr("width",largestX+100),$("svg").attr("height",largestY+250)}},nbBranches=0,branchNumber=0,groupNumber=0,conditionId=1,highestId=1,previousDrawnElement="initial",furthestWhileX=500,furthestWhileY=0,conditionIdToConnect=0,condition=new Array,endBranch1=new Array,endBranch2=new Array,reconnect=new Array,casesForSwitch=new Array,longestInSwitch=0,needToTranslate=0,inSwitch=0;conditionSwitch=new Array,endBranch1[branchNumber]=new Array,endBranch2[branchNumber]=new Array,reconnect[branchNumber]=new Array,casesForSwitch[conditionId]=new Array;var svgns="http://www.w3.org/2000/svg",constStartX=120,constStartY=20,startX=constStartX,largestX=startX,startY=constStartY,largestY=startY,defaultTroke="purple",unitVertical=50,unitHorizontal=50,standardHorizontal=3*unitHorizontal,horizontalPointingArrowX=5,horizontalPointingArrowY=10,verticalPointingArrowX=10,horizontalPointingArrowY=5,rectangleWidth=150,defaultStrokeWidth="2",emptyFill="none",startNoX,startNoY,TextVal="",defaultTextSize="14",defaultFontFamily="Arial";groupIsComplete=!0;var incrementId=function(){var e=0;return function(){return e+=1}}(),GroupObject=function(e){this.groupId="groupId"+incrementId(),this.drawGroup=function(t){var n=document.createElementNS(svgns,"g");null!=e?setAttributes(n,{id:this.groupId,"data-branch":groupNumber,"data-line":e}):setAttributes(n,{id:this.groupId,"data-branch":groupNumber}),null==t?document.getElementById("svgOne").appendChild(n):document.getElementById(t).appendChild(n);n.previousSibling}},SymbolObject=function(){this.symbolId="defId"+incrementId(),this.drawSymbol=function(e){var t=document.createElementNS(svgns,"symbol");setAttributes(t,{id:this.symbolId,"data-branch":groupNumber});t.previousSibling}},LineObject=function(e){if("right"===e)this.x1=startNoX,this.y1=startNoY,this.x2=this.x1+3*unitHorizontal,this.y2=this.y1;else if("horizontalSeparator"===e)this.x1=startX+200,this.y1=startY+100.5,this.x2=this.x1+3*unitHorizontal,this.y2=this.y1;else if("left"===e)this.x1=startX,this.y1=startY,this.x2=this.x1-2.5*unitHorizontal,this.y2=this.y1;else if("down"===e)this.x1=startX,this.y1=startY,this.x2=this.x1,this.y2=this.y1+unitVertical;else{if("up"!==e)throw console.log("The direction provided is not supported. \nPlease specify the direction using 'up', 'down', 'left' or 'right'"),new Error("Invalid direction used for line object.");this.x1=startX,this.y1=startY,this.x2=this.x1,this.y2=this.y1-unitVertical}this.stroke=defaultTroke,this.strokeWidth=defaultStrokeWidth,this.shapeId="shapeId"+incrementId(),this.drawLine=function(t){var n=document.createElementNS(svgns,"line");setAttributes(n,{id:this.shapeId,stroke:this.stroke,"stroke-width":this.strokeWidth,x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2}),null==t?document.getElementById("svgOne").appendChild(n):document.getElementById(t).appendChild(n),"horizontalSeparator"===e?(startX=this.x1-200,startY=this.y1-50.5):(startX=this.x2,startY=this.y2),largestX<startX&&(largestX=startX),largestY<startY&&(largestY=startY)}},ArrowObject=function(e){if("right"===e)this.points=startX-10+", "+(startY-5)+" "+startX+", "+startY+" "+(startX-10)+", "+(startY+5);else if("left"===e)this.points=startX+10+", "+(startY-5)+" "+startX+", "+startY+" "+(startX+10)+", "+(startY+5);else if("up"===e)this.points=startX+5+", "+(startY+10)+" "+startX+", "+startY+" "+(startX-5)+", "+(startY+10);else{if("down"!==e)throw console.log("The direction provided is not supported. \nPlease specify the direction using 'up', 'down', 'left' or 'right'"),new Error("Invalid direction used for arrow object.");this.points=startX+5+", "+(startY-10)+" "+startX+", "+startY+" "+(startX-5)+", "+(startY-10)}this.stroke=defaultTroke,this.fill=emptyFill,this.strokeWidth=defaultStrokeWidth,this.shapeId="shapeId"+incrementId(),this.drawArrow=function(){var e=document.createElementNS(svgns,"polyline");setAttributes(e,{id:this.shapeId,points:this.points,stroke:this.stroke,"stroke-width":this.strokeWidth,fill:"none"}),document.getElementById("svgOne").appendChild(e);
var t=e.previousSibling;"g"==t.tagName&&t.appendChild(e)}},EllipseWithTextObject=function(e){this.cx=startX,this.cy=startY+unitVertical-20,this.rx=unitHorizontal,this.ry=unitVertical-20,this.stroke=defaultTroke,this.fill=emptyFill,this.strokeWidth=defaultStrokeWidth,this.groupId="groupId"+incrementId(),this.shapeId="shapeId"+incrementId(),this.textId="textId"+incrementId(),this.fillText="#000",this.textSize=defaultTextSize,this.fontFamily=defaultFontFamily,this.textVal=TextVal,this.drawEllipseWithText=function(){var t=document.createElementNS(svgns,"g");null!=e?setAttributes(t,{id:this.groupId,"data-branch":groupNumber,"data-line":e}):setAttributes(t,{id:this.groupId,"data-branch":groupNumber});var n=document.createElementNS(svgns,"ellipse");setAttributes(n,{id:this.shapeId,stroke:this.stroke,"stroke-width":this.strokeWidth,fill:this.fill,cx:this.cx,cy:this.cy,rx:this.rx,ry:this.ry}),document.getElementById("svgOne").appendChild(t),t.appendChild(n);var i=document.createElementNS(svgns,"text");setAttributes(i,{id:this.textId,fill:this.fillText,"font-size":this.textSize,"font-family":this.fontFamily,x:this.cx,y:this.cy}),t.appendChild(i),document.getElementById(this.textId).textContent=this.textVal;var r=i.getBBox();for(setAttributes(i,{x:this.cx-r.width/2,y:this.cy+6});r.width+10>=2*this.rx;){this.rx+=unitHorizontal;document.getElementById(this.shapeId);t.removeChild(n);var n=document.createElementNS(svgns,"ellipse");setAttributes(n,{id:this.shapeId,cx:this.cx,cy:this.cy,rx:this.rx,ry:this.ry,stroke:this.stroke,fill:this.fill,"stroke-width":this.strokeWidth}),t.appendChild(n)}startY+=2*(unitVertical-20);var o=t.previousSibling;for("polyline"==o.tagName&&t.insertBefore(o,t.firstChild);"line"==o.tagName;)t.insertBefore(o,t.firstChild),o=t.previousSibling}},RectangleWithTextObject=function(e){this.height=unitVertical,this.width=rectangleWidth,this.x=startX-this.width/2,this.y=startY,this.stroke=defaultTroke,this.fill=emptyFill,this.strokeWidth=defaultStrokeWidth,this.groupId="groupId"+incrementId(),this.shapeId="shapeId"+incrementId(),this.textId="textId"+incrementId(),this.fillText="#000",this.textSize=defaultTextSize,this.fontFamily=defaultFontFamily,this.textVal=TextVal,this.drawRectangleWithText=function(){var t=document.createElementNS(svgns,"g");null!=e?setAttributes(t,{id:this.groupId,"data-branch":groupNumber,"data-line":e}):setAttributes(t,{id:this.groupId,"data-branch":groupNumber});var n=document.createElementNS(svgns,"rect");setAttributes(n,{id:this.shapeId,x:this.x,y:this.y,height:this.height,width:this.width,stroke:this.stroke,fill:this.fill,"stroke-width":this.strokeWidth}),document.getElementById("svgOne").appendChild(t),t.appendChild(n);var i=document.createElementNS(svgns,"text");setAttributes(i,{id:this.textId,fill:this.fillText,"font-size":this.textSize,"font-family":this.fontFamily}),t.appendChild(i),document.getElementById(this.textId).textContent=this.textVal;var r=i.getBBox();if(setAttributes(i,{x:this.x+(this.width-r.width)/2,y:this.y+this.height-1.25*r.height}),r.width+10>=rectangleWidth){var o=document.getElementById(this.shapeId),a=wraptorect(i,o,10,1);t.removeChild(n);var n=document.createElementNS(svgns,"rect");setAttributes(n,{id:this.shapeId,x:this.x,y:this.y,height:20*a+35,width:this.width,stroke:this.stroke,fill:this.fill,"stroke-width":this.strokeWidth}),t.appendChild(n),startY+=20*a+35}else startY+=this.height;var d=t.previousSibling;for("polyline"==d.tagName&&t.insertBefore(d,t.firstChild),d=t.previousSibling;"line"==d.tagName;)t.insertBefore(d,t.firstChild),d=t.previousSibling;0!=groupIsComplete||"g"!=d.tagName||"if"!=previousDrawnElement&&"else"!=previousDrawnElement&&"whileTrue"!=previousDrawnElement&&"whileFalse"!=previousDrawnElement||t.insertBefore(d,t.firstChild)}},DiamondWithTextObject=function(e){this.points=startX+", "+startY+" "+(startX+unitHorizontal)+", "+(startY+unitVertical)+" "+startX+", "+(startY+2*unitVertical)+" "+(startX-unitHorizontal)+", "+(startY+unitVertical),this.x=startX-unitHorizontal,this.y=startY+1.5*unitVertical,this.stroke=defaultTroke,this.fill=emptyFill,this.strokeWidth=defaultStrokeWidth,this.groupId="groupId"+incrementId(),this.textId="textId"+incrementId(),this.shapeId="shapeId"+incrementId(),this.fillText="#000",this.textSize=defaultTextSize,this.fontFamily=defaultFontFamily,this.textVal=TextVal,this.drawDiamondWithText=function(){var t=document.createElementNS(svgns,"g");null!=e?setAttributes(t,{id:this.groupId,"data-branch":groupNumber,"data-line":e}):setAttributes(t,{id:this.groupId,"data-branch":groupNumber});var n=document.createElementNS(svgns,"text");setAttributes(n,{id:this.textId,fill:this.fillText,"font-size":this.textSize,"font-family":this.fontFamily}),document.getElementById("svgOne").appendChild(t),t.appendChild(n),document.getElementById(this.textId).textContent=this.textVal;for(var i=n.getBBox(),r=0;i.width+16>=2*unitHorizontal;)unitHorizontal*=1.5,r++;0!=r&&"caseElse"==previousDrawnElement&&(startX+=r*standardHorizontal/6),this.points=startX+", "+startY+" "+(startX+unitHorizontal)+", "+(startY+unitVertical)+" "+startX+", "+(startY+2*unitVertical)+" "+(startX-unitHorizontal)+", "+(startY+unitVertical),setAttributes(n,{x:startX-i.width/2,y:this.y-1.25*i.height});var o=document.createElementNS(svgns,"polygon");setAttributes(o,{id:this.shapeId,points:this.points,y:this.y,stroke:this.stroke,fill:"none","stroke-width":this.strokeWidth}),t.appendChild(o);var a=t.previousSibling;"g"==a.tagName?t.insertBefore(a,t.firstChild):"polyline"==a.tagName&&t.insertBefore(a,t.firstChild);var a=t.previousSibling;for("polyline"==a.tagName&&t.insertBefore(a,t.firstChild),a=t.previousSibling;"line"==a.tagName;)t.insertBefore(a,t.firstChild),a=t.previousSibling;0==groupIsComplete&&"g"==a.tagName&&t.insertBefore(a,t.firstChild),t.removeChild(n),t.appendChild(n),startNoX=startX+unitHorizontal,startNoY=startY+unitVertical,startY+=2*unitVertical,unitHorizontal=50},groupIsComplete=!0},TextObject=function(e){this.x=startX,this.y=startY,this.stroke=defaultTroke,this.fill=emptyFill,this.strokeWidth=defaultStrokeWidth,this.textId="textId"+incrementId(),this.fillText="#000",this.textSize=defaultTextSize,this.fontFamily=defaultFontFamily,this.textVal=TextVal,this.drawText=function(t,n,i){if("no"==e){groupIsComplete=!1;var r=document.createElementNS(svgns,"text");this.textId="textId"+incrementId(),setAttributes(r,{id:this.textId,fill:this.fillText,"font-size":this.textSize,"font-family":this.fontFamily,x:n+10,y:startNoY-3}),document.getElementById(t).appendChild(r),document.getElementById(this.textId).textContent="no"}else if("yes"==e){groupIsComplete=!1;var o=document.createElementNS(svgns,"text");this.textId="textId"+incrementId(),setAttributes(o,{id:this.textId,fill:this.fillText,"font-size":this.textSize,"font-family":this.fontFamily,x:startX+10,y:startY+3}),document.getElementById(t).appendChild(o),document.getElementById(this.textId).textContent="yes"}else{null==n&&(n=startX),null==i&&(i=startY);var a=document.createElementNS(svgns,"text");this.textId="textId"+incrementId(),setAttributes(a,{id:this.textId,fill:this.fillText,"font-size":this.textSize,"font-family":this.fontFamily,x:n,y:i}),document.getElementById(t).appendChild(a),document.getElementById(this.textId).textContent=e}}},ExpansionObject=function(e,t,n,i,r,o,a,d){this.points=e+", "+t+" "+(parseInt(e)+parseInt(n))+", "+t+" "+(parseInt(i)+parseInt(o))+", "+r+" "+i+", "+r+" "+parseInt(e)+", "+t,this.stroke=defaultTroke,this.fill=emptyFill,this.strokeWidth=0,this.shapeId="shapeId"+incrementId(),this.drawExpansion=function(){var e=document.createElementNS(svgns,"polygon");setAttributes(e,{id:this.shapeId,points:this.points,stroke:this.stroke,"stroke-width":this.strokeWidth,fill:"none",class:"expansion"}),document.getElementById(d).appendChild(e)}};$(document).ready(function(){function e(e){$("g[data-line='"+e+"']").attr("class","hovered"),e<=0||e>=editor.lastLine()+2||null==e?($("div.CodeMirror-activeline").removeClass("CodeMirror-activeline"),$("div.CodeMirror-activeline-background").removeClass("CodeMirror-activeline-background")):($(this).attr("class","hovered"),editor.setCursor(parseInt(e-1),0))}function t(){if($("#controlPanel").addClass("running"),$("#svgOne").attr("pointer-events","none"),$("#ifelse").attr("pointer-events","none"),$("g").attr("class",""),0==r?($("#inputAge").text(""),$("#inputEntry").text(""),n=null,i=null,document.getElementById("ageGiven").innerHTML="",document.getElementById("entryResults").innerHTML="",e(0)):1==r?($("#inputAge").text(n),$("#inputEntry").text(i),e(1)):2==r?(n=parseInt(prompt("What is your age?")),$("#inputAge").text(n),e(3)):3==r?(document.getElementById("ageGiven").innerHTML=n,e(5)):4==r?e(7):5==r?n<=12?$("#groupId21").addClass("true"):$("#groupId21").addClass("false"):6==r?n<=12?(i="free",document.getElementById("entryResults").innerHTML=i,$("#inputEntry").text(i),e(8)):e(9):7==r?n<=12?($("#groupId68").attr("class","hovered"),editor.setCursor(parseInt(12),0),r=9):n<=16?$("#groupId38").addClass("true"):$("#groupId38").addClass("false"):8==r?n<=16?(i="10",$("#groupId46").attr("class","hovered"),$("#ifelse").attr("data-line","10"),document.getElementById("entryResults").innerHTML=i,$("#inputEntry").text(i)):(i="20",document.getElementById("entryResults").innerHTML=i,$("#inputEntry").text(i),e(12)):9==r?n<=16?($("#groupId58").attr("class","hovered"),$("#groupId65").attr("class","hovered"),$("#ifelse").attr("data-line","13")):($("#groupId61").attr("class","hovered"),$("#groupId65").attr("class","hovered"),$("#ifelse").attr("data-line","13")):10==r?e(15):11==r&&(e(16),$("#svgOne").attr("pointer-events","auto"),$("#ifelse").attr("pointer-events","auto"),$("#controlPanel").removeClass("running"),r=-1),r+=1,o)if(r>0&&r<=11)var a=setTimeout(function(){t()},1e3);else clearTimeout(a)}var n,i,r=0,o=!1;$("#sourceCode").offset().top,$("#ifelse"),$("g");$(document).on("mouseenter","g",function(){$("g").attr("class","");var e=$(this).attr("data-line");e<=0||e>=editor.lastLine()+2||null==e?($("div.CodeMirror-activeline").removeClass("CodeMirror-activeline"),$("div.CodeMirror-activeline-background").removeClass("CodeMirror-activeline-background")):($(this).attr("class","hovered"),editor.setCursor(parseInt(e-1),0))}),$(document).on("mousedown","g",function(){$("g").attr("class","");var e=$(this).attr("data-line");e<=0||e>=editor.lastLine()+2||null==e?($("div.CodeMirror-activeline").removeClass("CodeMirror-activeline"),$("div.CodeMirror-activeline-background").removeClass("CodeMirror-activeline-background")):($(this).attr("class","hovered"),editor.setCursor(parseInt(e-1),0))}),$(document).on("touchstart","g",function(){$("g").attr("class","");var e=$(this).attr("data-line");e<=0||e>=editor.lastLine()+2||null==e?($("div.CodeMirror-activeline").removeClass("CodeMirror-activeline"),$("div.CodeMirror-activeline-background").removeClass("CodeMirror-activeline-background")):($(this).attr("class","hovered"),editor.setCursor(parseInt(e-1),0))}),$(document).on("mousedown","#sourceCode",function(e){if("none"!=$("#ifelse").attr("pointer-events")){$("g").attr("class","");var t=editor.getCursor();lineNum=t.line+1,lineNum>=0&&lineNum<=editor.lastLine()+1&&$("g[data-line='"+lineNum+"']").attr("class","hovered")}}),$(document).on("touchstart","#sourceCode",function(e){if("none"!=$("#ifelse").attr("pointer-events")){$("g").attr("class","");var t=editor.getCursor();lineNum=t.line+1,lineNum>=0&&lineNum<=editor.lastLine()+1&&$("g[data-line='"+lineNum+"']").attr("class","hovered")}}),$(document).on("click","#executeFull",function(){o=!0,t()}),$(document).on("click","#execute",function(){o=!1,t()})});var nbBranches=0,branchNumber=0,groupNumber=0,conditionId=1,highestId=1,previousDrawnElement="initial",furthestWhileX=500,furthestX,furthestWhileY=0,conditionIdToConnect=0,condition=new Array,endBranch1=new Array,endBranch2=new Array,reconnect=new Array,casesForSwitch=new Array,longestInSwitch=0,needToTranslate=0,inSwitch=0;conditionSwitch=new Array,endBranch1[branchNumber]=new Array,endBranch2[branchNumber]=new Array,reconnect[branchNumber]=new Array,casesForSwitch[conditionId]=new Array,$(document).ready(function(){function e(e){$("g[data-line='"+e+"']").attr("class","hovered"),e<=0||e>=editor.lastLine()+2||null==e?($("div.CodeMirror-activeline").removeClass("CodeMirror-activeline"),$("div.CodeMirror-activeline-background").removeClass("CodeMirror-activeline-background")):($(this).attr("class","hovered"),editor.setCursor(parseInt(e-1),0))}function t(){if($("#controlPanel").addClass("running"),$("#svgOne").attr("pointer-events","none"),$("#ifelse").attr("pointer-events","none"),$("g").attr("class",""),0==r?($("#inputAge").text(""),$("#inputEntry").text(""),n=null,i=null,document.getElementById("ageGiven").innerHTML="",document.getElementById("entryResults").innerHTML="",$("#svgContainer").animate({scrollTop:$("g[data-line='0']").offset().top},500),e(0)):1==r?($("#inputAge").text(n),$("#inputEntry").text(i),e(1)):2==r?(n=parseInt(prompt("What is your age?")),$("#inputAge").text(n),$("#svgContainer").animate({scrollTop:$("g[data-line='3']").offset().top},500),e(3)):3==r?(document.getElementById("ageGiven").innerHTML=n,e(5)):4==r?e(7):5==r?n<=12?$("#groupId21").addClass("true"):$("#groupId21").addClass("false"):6==r?n<=12?(i="free",document.getElementById("entryResults").innerHTML=i,$("#inputEntry").text(i),$("#svgContainer").animate({scrollTop:$("g[data-line='8']").offset().top},500),e(8)):($("#svgContainer").animate({scrollTop:$("g[data-line='9']").offset().top},500),e(9)):7==r?n<=12?($("#groupId68").attr("class","hovered"),editor.setCursor(parseInt(12),0),r=9):n<=16?$("#groupId38").addClass("true"):($("#svgContainer").animate({scrollTop:$("#groupId38").offset().top},500),$("#groupId38").addClass("false")):8==r?n<=16?(i="10",$("#groupId46").attr("class","hovered"),$("#ifelse").attr("data-line","10"),document.getElementById("entryResults").innerHTML=i,$("#inputEntry").text(i)):(i="20",document.getElementById("entryResults").innerHTML=i,$("#inputEntry").text(i),e(12)):9==r?($("#svgContainer").animate({scrollTop:$("g[data-line='13']").offset().top},500),n<=16?($("#groupId58").attr("class","hovered"),$("#groupId65").attr("class","hovered"),$("#ifelse").attr("data-line","13")):($("#groupId61").attr("class","hovered"),$("#groupId65").attr("class","hovered"),$("#ifelse").attr("data-line","13"))):10==r?e(15):11==r&&(e(16),$("#svgOne").attr("pointer-events","auto"),$("#ifelse").attr("pointer-events","auto"),$("#controlPanel").removeClass("running"),r=-1),r+=1,o)if(r>0&&r<=11)var a=setTimeout(function(){t()},1e3);else clearTimeout(a)}var n,i,r=0,o=!1;$("#sourceCode").offset().top,$("#ifelse"),$("g");$(document).on("mouseenter","g",function(){$("g").attr("class","");var e=$(this).attr("data-line");e<=0||e>=editor.lastLine()+2||null==e?($("div.CodeMirror-activeline").removeClass("CodeMirror-activeline"),$("div.CodeMirror-activeline-background").removeClass("CodeMirror-activeline-background")):($(this).attr("class","hovered"),editor.setCursor(parseInt(e-1),0),$("g[data-line='"+$(this).attr("data-line")+"'][data-branch='"+$(this).attr("data-branch")+"']:first").attr("class","hovered"))}),$(document).on("mousedown","g",function(){$("g").attr("class","");var e=$(this).attr("data-line");e<=0||e>=editor.lastLine()+2||null==e?($("div.CodeMirror-activeline").removeClass("CodeMirror-activeline"),$("div.CodeMirror-activeline-background").removeClass("CodeMirror-activeline-background")):($(this).attr("class","hovered"),editor.setCursor(parseInt(e-1),0),$("g[data-branch='"+$(this).attr("data-branch")+"']:first").attr("class","hovered"))}),$(document).on("mousedown","#sourceCode",function(e){if("none"!=$("#ifelse").attr("pointer-events")){$("g").attr("class","");var t=editor.getCursor();lineNum=t.line+1,lineNum>=0&&lineNum<=editor.lastLine()+1&&$("g[data-line='"+lineNum+"']").attr("class","hovered")}}),$(document).on("click","#executeFull",function(){o=!0,t()}),$(document).on("click","#execute",function(){o=!1,t()})});var groupNumber=0,needToTranslate=0,branchNumber=0,innerGroup=!1,highestBranchNumber=1,expansionArray=new Array,allArrays=new Array,codeLineTest=0,arrayCellWithTextObject=function(e,t,n){var i=!1;void 0==t&&(t=""),this.height=50,this.width=100,this.x=startX,this.y=startY,this.stroke=defaultTroke,this.fill=emptyFill,this.strokeWidth=defaultStrokeWidth,this.textId="textId"+incrementId(),this.textIndexId="textIndexId"+incrementId(),this.shapeId="shape"+incrementId(),this.shapeIndexId="shapeIndex"+incrementId(),this.fillText="#000",this.textSize=defaultTextSize,this.fontFamily=defaultFontFamily,this.textVal=t,this.textIndex=e,this.drawArrayCellWithText=function(e){var t=document.createElementNS(svgns,"rect");setAttributes(t,{id:this.shapeId,x:this.x,y:this.y,height:this.height,width:this.width,stroke:this.stroke,fill:this.fill,"stroke-width":this.strokeWidth}),null!=e?($("g").last().append(t),i=!0,innerGroup=!0):innerGroup?$("g").last().parent().append(t):($("g").last().append(t),i=!1);var r=document.createElementNS(svgns,"text");setAttributes(r,{id:this.textId,fill:this.fillText,"font-size":this.textSize,"font-family":this.fontFamily}),i?$("g").last().append(r):$("rect").last().parent().append(r),document.getElementById(this.textId).textContent=this.textVal;for(var o=r.getBBox();o.width>=this.width-20;){document.getElementById(this.shapeId);this.width=this.width+50;var a=document.getElementById(this.shapeId).parentNode;a.removeChild(t);var t=document.createElementNS(svgns,"rect");setAttributes(t,{id:this.shapeId,x:this.x,y:this.y,height:this.height,width:this.width,stroke:this.stroke,fill:this.fill,"stroke-width":this.strokeWidth}),$("g").last().append(t)}if(setAttributes(r,{x:this.x+(this.width-o.width)/2,y:this.y+this.height-1.25*o.height}),1!=n){var d=document.createElementNS(svgns,"rect");setAttributes(d,{id:this.shapeIndexId,x:this.x,y:this.y,height:17,width:24,stroke:this.stroke,fill:this.fill,"stroke-width":this.strokeWidth}),i?$("g").last().append(d):$("rect").last().parent().append(d);var s=document.createElementNS(svgns,"text");setAttributes(s,{id:this.textIndexId,fill:this.fillText,"font-size":this.textSize,"font-family":this.fontFamily}),i?$("g").last().append(s):$("rect").last().parent().append(s),document.getElementById(this.textIndexId).textContent=this.textIndex;var l=s.getBBox();setAttributes(s,{x:this.x+(24-l.width)/2,y:this.y+33-1.25*l.height})}startX+=this.width,largestX<=startX&&(largestX=startX),largestY<=startY&&(largestY=startY),largestY<=308&&(largestY=308),$("svg").attr("width",largestX+100),$("svg").attr("height",largestY+250)}};